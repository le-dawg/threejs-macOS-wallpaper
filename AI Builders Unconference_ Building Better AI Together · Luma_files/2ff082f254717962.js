;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="812e84ab-4af7-d722-b2ef-84ed47ece66f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,193790,e=>{"use strict";var t=e.i(191788);e.s(["useStaticCallback",0,e=>{let n=(0,t.useRef)(e);(0,t.useEffect)(()=>{n.current=e},[e]);let{current:i}=(0,t.useRef)(function(){for(var e,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return null==(e=n.current)?void 0:e.call(n,...i)});return i}])},277386,839746,e=>{"use strict";var t,n,i,a=((n={}).ReactionCountUpdated="rcu",n.ChatConversationUpsert="ucc",n.ChatParticipantUpsert="pccp",n.ChatParticipantIsTyping="cpit",n.ChatMessagesBatch="ucmb",n.ChatUserUpsert="pcu",n.NotificationsCreated="nc",n.NotificationsSeen="ns",n);(t=i||(i={})).EventChannelPrefix="$event:",t.eventChannel=e=>{let{event_api_id:n}=e;return"".concat(t.EventChannelPrefix).concat(n)},t.parseEventChannel=e=>e.startsWith(t.EventChannelPrefix)?e.slice(t.EventChannelPrefix.length):null,t.personalChannel=e=>{let{user_api_id:t}=e;return"chat#".concat(t)},e.s(["CentrifugeTypes",()=>i,"RealTimeUpdateType",()=>a,"getRealTimeChannelForChatConversation",0,e=>{let{chat_conversation_api_id:t}=e;return"".concat("$chat_conversation:").concat(t)},"getRealTimeChannelForUserChat",0,e=>"chat#".concat(e.api_id)],277386);var r=e.i(498076),s=e.i(191788),c=e.i(826420),o=e.i(193790),l=e.i(173685),u=e.i(348688);e.s(["useCentrifugeSubscription",0,e=>{let{channel:t,pause:n,onSubscribe:i,onUpdate:a,onError:p}=e,C=(0,o.useStaticCallback)(i),h=(0,o.useStaticCallback)(a),b=(0,o.useStaticCallback)(p),{centrifuge:d}=(0,s.useContext)(l.CentrifugeContext),[f,v]=(0,s.useState)(null),S=(0,c.useBoolean)();return(0,s.useEffect)(()=>{if(!d||!t||n||S.value)return;let e=async e=>{try{let{token:t}=await u.APIClient.post("/centrifuge/get-channel-token",{channel:e.channel});return t}catch(n){S.setTrue();let e=d.getSubscription(t);throw e&&d.removeSubscription(e),n}},i=d.getSubscription(t)||d.newSubscription(t,{getToken:t.includes("#")?null:e});i.addListener("subscribed",()=>{C()});let a=e=>{h(e.data)};return i.addListener("publication",a),i.addListener("error",e=>{console.error("Error with subscription:",e),b(e)}),i.state==r.SubscriptionState.Subscribed&&C(),i.subscribe(),v(i),()=>{i.removeListener("subscribed",C),i.removeListener("publication",a),i.removeListener("error",b),v(null)}},[d,t,C,h,b,n,S]),f}],839746)},289391,e=>{"use strict";var t=e.i(391398),n=e.i(398050),i=e.i(191788),a=e.i(277386),r=e.i(829900),s=e.i(839746);e.s(["RealtimeNotificationsListener",0,e=>{let{paginatedState:c}=e;return(e=>{let{paginatedState:t}=e,{user:c}=(0,r.useUserContext)(),{updateEntries:o,addEntries:l}=t,u=(0,i.useCallback)(e=>{let{notification_api_ids:t}=e,i=new Set(t);o(e=>i.has(e.api_id)?{...e,notification:{...e.notification,seen_at:n.DateTime.now().toISO()}}:e)},[o]),p=(0,i.useCallback)(e=>{let{notifications:t}=e;l(t)},[l]),C=c?a.CentrifugeTypes.personalChannel({user_api_id:c.api_id}):void 0;(0,s.useCentrifugeSubscription)({pause:!C,channel:C,onUpdate:e=>{e.type===a.RealTimeUpdateType.NotificationsSeen?u(e):e.type===a.RealTimeUpdateType.NotificationsCreated&&p(e)}})})({paginatedState:c}),(0,t.jsx)(t.Fragment,{})}])}]);

//# debugId=812e84ab-4af7-d722-b2ef-84ed47ece66f
//# sourceMappingURL=f72e5357cdb8fa33.js.map