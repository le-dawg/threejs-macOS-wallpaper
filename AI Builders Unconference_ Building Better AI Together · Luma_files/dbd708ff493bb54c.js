;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="27f4d59d-c143-3622-86f1-fc3829870a7d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,451588,e=>{"use strict";e.i(193683);var t=e.i(308822),n=e.i(331835);function r(e){let{schema:n,doc:r}=e;if(!r.content||0===r.content.length)return t.Slice.empty;let o=r.content.map(e=>i(n,e)).filter(Boolean),a=t.Fragment.from(o);return new t.Slice(a,0,0)}function i(e,r){var i,l;switch(r.type){case n.SparkTypes.Block.Paragraph:return e.nodes[n.SparkTypes.Block.Paragraph].create(null,r.content?a(e,r.content):null);case n.SparkTypes.Block.Heading:return e.nodes[n.SparkTypes.Block.Heading].create({level:(null==(i=r.attrs)?void 0:i.level)||1},r.content?a(e,r.content):null);case n.SparkTypes.Block.Blockquote:return e.nodes[n.SparkTypes.Block.Blockquote].create(null,r.content?a(e,r.content):null);case n.SparkTypes.Block.CodeBlock:return e.nodes[n.SparkTypes.Block.CodeBlock].create({language:(null==(l=r.attrs)?void 0:l.language)||""},r.content?a(e,r.content):null);case n.SparkTypes.Block.BulletList:if(!r.content)return null;return e.nodes[n.SparkTypes.Block.BulletList].create(null,t.Fragment.from(r.content.map(t=>o(e,t)).filter(Boolean)));case n.SparkTypes.Block.OrderedList:if(!r.content)return null;return e.nodes[n.SparkTypes.Block.OrderedList].create(null,t.Fragment.from(r.content.map(t=>o(e,t)).filter(Boolean)));case n.SparkTypes.Block.HorizontalRule:return e.nodes[n.SparkTypes.Block.HorizontalRule].create();default:return console.warn("Unsupported block type: ".concat(r.type)),null}}function o(e,r){if(!r.content||0===r.content.length)return null;let o=r.content.map(t=>i(e,t)).filter(Boolean);return e.nodes[n.SparkTypes.Block.ListItem].create(null,t.Fragment.from(o))}function a(e,r){let i=[];for(let t of r)if(t.type===n.SparkTypes.Inline.Text){let r=e.text(t.text||"");if(t.marks&&t.marks.length>0){let i=[];for(let r of t.marks)switch(r.type){case n.SparkTypes.Mark.Bold:e.marks[n.SparkTypes.Mark.Bold]&&i.push(e.marks[n.SparkTypes.Mark.Bold].create());break;case n.SparkTypes.Mark.Italic:e.marks[n.SparkTypes.Mark.Italic]&&i.push(e.marks[n.SparkTypes.Mark.Italic].create());break;case n.SparkTypes.Mark.Code:e.marks[n.SparkTypes.Mark.Code]&&i.push(e.marks[n.SparkTypes.Mark.Code].create());break;case n.SparkTypes.Mark.Link:var o;e.marks[n.SparkTypes.Mark.Link]&&(null==(o=r.attrs)?void 0:o.href)&&i.push(e.marks[n.SparkTypes.Mark.Link].create({href:r.attrs.href}));break;case n.SparkTypes.Mark.Underline:e.marks[n.SparkTypes.Mark.Underline]&&i.push(e.marks[n.SparkTypes.Mark.Underline].create());break;default:console.warn("Unsupported mark type: ".concat(r.type))}i.length>0&&(r=r.mark(i))}i.push(r)}else console.warn("Unsupported inline type: ".concat(t.type));return t.Fragment.from(i)}e.s(["createSliceFromSparkDoc",()=>r])},112977,e=>{"use strict";var t,n=e.i(715105);let r={}.hasOwnProperty,i={}.hasOwnProperty;function o(e,t,n){return">"+(n?"":" ")+e}function a(e,t){return l(e,t.inConstruct,!0)&&!l(e,t.notInConstruct,!1)}function l(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function s(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if("\n"===n.unsafe[i].character&&a(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function c(e,t){return!!(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function u(e,t,n){return(n?"":"    ")+e}function d(e){let t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function p(e){return"&#x"+e.toString(16).toUpperCase()+";"}var f=e.i(593822);function h(e,t,n){let r=(0,f.classifyCharacter)(e),i=(0,f.classifyCharacter)(t);return void 0===r?void 0===i?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function m(e,t,n,r){let i=function(e){let t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),o=n.enter("emphasis"),a=n.createTracker(r),l=a.move(i),s=a.move(n.containerPhrasing(e,{after:i,before:l,...a.current()})),c=s.charCodeAt(0),u=h(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(s=p(c)+s.slice(1));let d=s.charCodeAt(s.length-1),f=h(r.after.charCodeAt(0),d,i);f.inside&&(s=s.slice(0,-1)+p(d));let m=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+s+m}m.peek=function(e,t,n){return n.options.emphasis||"*"};var g=e.i(931188),b=e.i(869701),v=e.i(554792);function y(e,t){let n=!1;return(0,b.visit)(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,g.EXIT}),!!((!e.depth||e.depth<3)&&(0,v.toString)(e)&&(t.options.setext||n))}function k(e){return e.value||""}function x(e,t,n,r){let i=d(n),o='"'===i?"Quote":"Apostrophe",a=n.enter("image"),l=n.enter("label"),s=n.createTracker(r),c=s.move("![");return c+=s.move(n.safe(e.alt,{before:c,after:"]",...s.current()})),c+=s.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(e.url,{before:c,after:e.title?" ":")",...s.current()}))),l(),e.title&&(l=n.enter("title".concat(o)),c+=s.move(" "+i),c+=s.move(n.safe(e.title,{before:c,after:i,...s.current()})),c+=s.move(i),l()),c+=s.move(")"),a(),c}function w(e,t,n,r){let i=e.referenceType,o=n.enter("imageReference"),a=n.enter("label"),l=n.createTracker(r),s=l.move("!["),c=n.safe(e.alt,{before:s,after:"]",...l.current()});s+=l.move(c+"]["),a();let u=n.stack;n.stack=[],a=n.enter("reference");let d=n.safe(n.associationId(e),{before:s,after:"]",...l.current()});return a(),n.stack=u,o(),"full"!==i&&c&&c===d?"shortcut"===i?s=s.slice(0,-1):s+=l.move("]"):s+=l.move(d+"]"),s}function T(e,t,n){let r=e.value||"",i="`",o=-1;for(;RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){let e,t=n.unsafe[o],i=n.compilePattern(t);if(t.atBreak)for(;e=i.exec(r);){let t=e.index;10===r.charCodeAt(t)&&13===r.charCodeAt(t-1)&&t--,r=r.slice(0,t)+" "+r.slice(e.index+1)}}return i+r+i}function S(e,t){let n=(0,v.toString)(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function j(e,t,n,r){let i,o,a=d(n),l='"'===a?"Quote":"Apostrophe",s=n.createTracker(r);if(S(e,n)){let t=n.stack;n.stack=[],i=n.enter("autolink");let r=s.move("<");return r+=s.move(n.containerPhrasing(e,{before:r,after:">",...s.current()})),r+=s.move(">"),i(),n.stack=t,r}i=n.enter("link"),o=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(e,{before:c,after:"](",...s.current()})),c+=s.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(o=n.enter("destinationRaw"),c+=s.move(n.safe(e.url,{before:c,after:e.title?" ":")",...s.current()}))),o(),e.title&&(o=n.enter("title".concat(l)),c+=s.move(" "+a),c+=s.move(n.safe(e.title,{before:c,after:a,...s.current()})),c+=s.move(a),o()),c+=s.move(")"),i(),c}function M(e,t,n,r){let i=e.referenceType,o=n.enter("linkReference"),a=n.enter("label"),l=n.createTracker(r),s=l.move("["),c=n.containerPhrasing(e,{before:s,after:"]",...l.current()});s+=l.move(c+"]["),a();let u=n.stack;n.stack=[],a=n.enter("reference");let d=n.safe(n.associationId(e),{before:s,after:"]",...l.current()});return a(),n.stack=u,o(),"full"!==i&&c&&c===d?"shortcut"===i?s=s.slice(0,-1):s+=l.move("]"):s+=l.move(d+"]"),s}function A(e){let t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function L(e){let t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}k.peek=function(){return"<"},x.peek=function(){return"!"},w.peek=function(){return"!"},T.peek=function(){return"`"},j.peek=function(e,t,n){return S(e,n)?"<":"["},M.peek=function(){return"["};var C=e.i(443689);let E=(0,C.convert)(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function B(e,t,n,r){let i=function(e){let t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),o=n.enter("strong"),a=n.createTracker(r),l=a.move(i+i),s=a.move(n.containerPhrasing(e,{after:i,before:l,...a.current()})),c=s.charCodeAt(0),u=h(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(s=p(c)+s.slice(1));let d=s.charCodeAt(s.length-1),f=h(r.after.charCodeAt(0),d,i);f.inside&&(s=s.slice(0,-1)+p(d));let m=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+s+m}B.peek=function(e,t,n){return n.options.strong||"*"};let O={blockquote:function(e,t,n,r){let i=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);let l=n.indentLines(n.containerFlow(e,a.current()),o);return i(),l},break:s,code:function(e,t,n,r){let i=function(e){let t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),o=e.value||"",a="`"===i?"GraveAccent":"Tilde";if(c(e,n)){let e=n.enter("codeIndented"),t=n.indentLines(o,u);return e(),t}let l=n.createTracker(r),s=i.repeat(Math.max(function(e,t){let n=String(e),r=n.indexOf(t),i=r,o=0,a=0;if("string"!=typeof t)throw TypeError("Expected substring");for(;-1!==r;)r===i?++o>a&&(a=o):o=1,i=r+t.length,r=n.indexOf(t,i);return a}(o,i)+1,3)),d=n.enter("codeFenced"),p=l.move(s);if(e.lang){let t=n.enter("codeFencedLang".concat(a));p+=l.move(n.safe(e.lang,{before:p,after:" ",encode:["`"],...l.current()})),t()}if(e.lang&&e.meta){let t=n.enter("codeFencedMeta".concat(a));p+=l.move(" "),p+=l.move(n.safe(e.meta,{before:p,after:"\n",encode:["`"],...l.current()})),t()}return p+=l.move("\n"),o&&(p+=l.move(o+"\n")),p+=l.move(s),d(),p},definition:function(e,t,n,r){let i=d(n),o='"'===i?"Quote":"Apostrophe",a=n.enter("definition"),l=n.enter("label"),s=n.createTracker(r),c=s.move("[");return c+=s.move(n.safe(n.associationId(e),{before:c,after:"]",...s.current()})),c+=s.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(e.url,{before:c,after:e.title?" ":"\n",...s.current()}))),l(),e.title&&(l=n.enter("title".concat(o)),c+=s.move(" "+i),c+=s.move(n.safe(e.title,{before:c,after:i,...s.current()})),c+=s.move(i),l()),a(),c},emphasis:m,hardBreak:s,heading:function(e,t,n,r){let i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(y(e,n)){let t=n.enter("headingSetext"),r=n.enter("phrasing"),a=n.containerPhrasing(e,{...o.current(),before:"\n",after:"\n"});return r(),t(),a+"\n"+(1===i?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}let a="#".repeat(i),l=n.enter("headingAtx"),s=n.enter("phrasing");o.move(a+" ");let c=n.containerPhrasing(e,{before:"# ",after:"\n",...o.current()});return/^[\t ]/.test(c)&&(c=p(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),s(),l(),c},html:k,image:x,imageReference:w,inlineCode:T,link:j,linkReference:M,list:function(e,t,n,r){let i=n.enter("list"),o=n.bulletCurrent,a=e.ordered?function(e){let t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):A(n),l=e.ordered?"."===a?")":".":function(e){let t=A(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n),s=!!t&&!!n.bulletLastUsed&&a===n.bulletLastUsed;if(!e.ordered){let t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(s=!0),L(n)===a&&t){let t=-1;for(;++t<e.children.length;){let n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){s=!0;break}}}}s&&(a=l),n.bulletCurrent=a;let c=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),c},listItem:function(e,t,n,r){let i=function(e){let t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n),o=n.bulletCurrent||A(n);t&&"list"===t.type&&t.ordered&&(o=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+o);let a=o.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));let l=n.createTracker(r);l.move(o+" ".repeat(a-o.length)),l.shift(a);let s=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,l.current()),function(e,t,n){return t?(n?"":" ".repeat(a))+e:(n?o:o+" ".repeat(a-o.length))+e});return s(),c},paragraph:function(e,t,n,r){let i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(e,r);return o(),i(),a},root:function(e,t,n,r){return(e.children.some(function(e){return E(e)})?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:B,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){let r=(L(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){let t=e.options.ruleRepetition||3;if(t<3)throw Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}},D=[function(e,t,n,r){if("code"===t.type&&c(t,r)&&("list"===e.type||e.type===t.type&&c(e,r)))return!1;if("spread"in n&&"boolean"==typeof n.spread){if("paragraph"===e.type&&(e.type===t.type||"definition"===t.type||"heading"===t.type&&y(t,r)))return;return+!!n.spread}}],R=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],P=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:"\n",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:R},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:"(?:[\r\n]|$)"},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:R},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:"(?:[ 	\r\n*])"},{character:"*",inConstruct:"phrasing",notInConstruct:R},{atBreak:!0,character:"+",after:"(?:[ 	\r\n])"},{atBreak:!0,character:"-",after:"(?:[ 	\r\n-])"},{atBreak:!0,before:"\\d+",character:".",after:"(?:[ 	\r\n]|$)"},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:R},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:R},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:R},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:R},{atBreak:!0,character:"~"}];var _=e.i(838706);function H(e){return e.label||!e.identifier?e.label||"":(0,_.decodeString)(e.identifier)}function I(e){if(!e._compiled){let t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}let N=/\r?\n|\r/g;function F(e,t){let n,r=[],i=0,o=0;for(;n=N.exec(e);)a(e.slice(i,n.index)),r.push(n[0]),i=n.index+n[0].length,o++;return a(e.slice(i)),r.join("");function a(e){r.push(t(e,o,!e))}}function z(e,t){return e-t}function V(e,t){let n,r=/\\(?=[!-/:-@[-`{-~])/g,i=[],o=[],a=e+t,l=-1,s=0;for(;n=r.exec(a);)i.push(n.index);for(;++l<i.length;)s!==i[l]&&o.push(e.slice(s,i[l])),o.push("\\"),s=i[l];return o.push(e.slice(s)),o.join("")}function U(e){let t=e||{},n=t.now||{},r=t.lineShift||0,i=n.line||1,o=n.column||1;return{move:function(e){let t=e||"",n=t.split(/\r?\n|\r/g),a=n[n.length-1];return i+=n.length-1,o=1===n.length?o+a.length:1+a.length+r,t},current:function(){return{now:{line:i,column:o},lineShift:r}},shift:function(e){r+=e}}}function W(e){throw Error("Cannot handle value `"+e+"`, expected node")}function q(e){throw Error("Cannot handle unknown node `"+e.type+"`")}function $(e,t){if("definition"===e.type&&e.type===t.type)return 0}function K(e,t){return function(e,t,n){let r,i=t.indexStack,o=e.children||[],a=[],l=-1,s=n.before;i.push(-1);let c=t.createTracker(n);for(;++l<o.length;){let u,d=o[l];if(i[i.length-1]=l,l+1<o.length){let n=t.handle.handlers[o[l+1].type];n&&n.peek&&(n=n.peek),u=n?n(o[l+1],e,t,{before:"",after:"",...c.current()}).charAt(0):""}else u=n.after;a.length>0&&("\r"===s||"\n"===s)&&"html"===d.type&&(a[a.length-1]=a[a.length-1].replace(/(\r?\n|\r)$/," "),s=" ",(c=t.createTracker(n)).move(a.join("")));let f=t.handle(d,e,t,{...c.current(),after:u,before:s});r&&r===f.slice(0,1)&&(f=p(r.charCodeAt(0))+f.slice(1));let h=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,r=void 0,h&&(a.length>0&&h.before&&s===a[a.length-1].slice(-1)&&(a[a.length-1]=a[a.length-1].slice(0,-1)+p(s.charCodeAt(0))),h.after&&(r=u)),c.move(f),a.push(f),s=f.slice(-1)}return i.pop(),a.join("")}(e,this,t)}function Y(e,t){return function(e,t,n){let r=t.indexStack,i=e.children||[],o=t.createTracker(n),a=[],l=-1;for(r.push(-1);++l<i.length;){let n=i[l];r[r.length-1]=l,a.push(o.move(t.handle(n,e,t,{before:"\n",after:"\n",...o.current()}))),"list"!==n.type&&(t.bulletLastUsed=void 0),l<i.length-1&&a.push(o.move(function(e,t,n,r){let i=r.join.length;for(;i--;){let o=r.join[i](e,t,n,r);if(!0===o||1===o)break;if("number"==typeof o)return"\n".repeat(1+o);if(!1===o)return"\n\n<!---->\n\n"}return"\n\n"}(n,i[l+1],e,t)))}return r.pop(),a.join("")}(e,this,t)}function Z(e,t){return function(e,t,n){let r=(n.before||"")+(t||"")+(n.after||""),i=[],o=[],l={},s=-1;for(;++s<e.unsafe.length;){let t,n=e.unsafe[s];if(!a(e.stack,n))continue;let o=e.compilePattern(n);for(;t=o.exec(r);){let e="before"in n||!!n.atBreak,r="after"in n,o=t.index+(e?t[1].length:0);i.includes(o)?(l[o].before&&!e&&(l[o].before=!1),l[o].after&&!r&&(l[o].after=!1)):(i.push(o),l[o]={before:e,after:r})}}i.sort(z);let c=n.before?n.before.length:0,u=r.length-(n.after?n.after.length:0);for(s=-1;++s<i.length;){let e=i[s];!(e<c)&&!(e>=u)&&(!(e+1<u)||i[s+1]!==e+1||!l[e].after||l[e+1].before||l[e+1].after)&&(i[s-1]!==e-1||!l[e].before||l[e-1].before||l[e-1].after)&&(c!==e&&o.push(V(r.slice(c,e),"\\")),c=e,!/[!-/:-@[-`{-~]/.test(r.charAt(e))||n.encode&&n.encode.includes(r.charAt(e))?(o.push(p(r.charCodeAt(e))),c++):o.push("\\"))}return o.push(V(r.slice(c,u),n.after)),o.join("")}(this,e,t)}let G=(0,e.i(502916).unified)().use(n.default).use(function(e){let t=this;t.compiler=function(n){var o;let a,l;return o={...t.data("settings"),...e,extensions:t.data("toMarkdownExtensions")||[]},!function e(t,n){var r,o,a,l;let s,c=-1;if(n.extensions)for(;++c<n.extensions.length;)e(t,n.extensions[c]);for(s in n)if(i.call(n,s))switch(s){case"extensions":break;case"unsafe":case"join":r=t[s],(o=n[s])&&r.push(...o);break;case"handlers":a=t[s],(l=n[s])&&Object.assign(a,l);break;default:t.options[s]=n[s]}return t}(a={associationId:H,containerPhrasing:K,containerFlow:Y,createTracker:U,compilePattern:I,enter:function(e){return a.stack.push(e),function(){a.stack.pop()}},handlers:{...O},handle:void 0,indentLines:F,indexStack:[],join:[...D],options:{},safe:Z,stack:[],unsafe:[...P]},o||{}),a.options.tightDefinitions&&a.join.push($),a.handle=function(e,t){let n=t||{};function i(t){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];let l=i.invalid,s=i.handlers;if(t&&r.call(t,e)){let n=String(t[e]);l=r.call(s,n)?s[n]:i.unknown}if(l)return l.call(this,t,...o)}return i.handlers=n.handlers||{},i.invalid=n.invalid,i.unknown=n.unknown,i}("type",{invalid:W,unknown:q,handlers:a.handlers}),(l=a.handle(n,void 0,a,{before:"\n",after:"\n",now:{line:1,column:1},lineShift:0}))&&10!==l.charCodeAt(l.length-1)&&13!==l.charCodeAt(l.length-1)&&(l+="\n"),l}}).freeze();function X(e,t){let n=String(e);if("string"!=typeof t)throw TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}var J=e.i(305400),Q=e.i(733473);let ee="phrasing",et=["autolink","link","image","label"];function en(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function er(e){this.config.enter.autolinkProtocol.call(this,e)}function ei(e){this.config.exit.autolinkProtocol.call(this,e)}function eo(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];(0,J.ok)("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function ea(e){this.config.exit.autolinkEmail.call(this,e)}function el(e){this.exit(e)}function es(e){!function(e,t,n){let r=(0,C.convert)((n||{}).ignore||[]),i=function(e){let t=[];if(!Array.isArray(e))throw TypeError("Expected find and replace tuple or list of tuples");let n=!e[0]||Array.isArray(e[0])?e:[e],r=-1;for(;++r<n.length;){var i;let e=n[r];t.push(["string"==typeof(i=e[0])?RegExp(function(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(i),"g"):i,function(e){return"function"==typeof e?e:function(){return e}}(e[1])])}return t}(t),o=-1;for(;++o<i.length;)(0,g.visitParents)(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){let e=t[a],i=n?n.children:void 0;if(r(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){let n=t[t.length-1],r=i[o][0],a=i[o][1],l=0,s=n.children.indexOf(e),c=!1,u=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){let n=d.index,i={index:d.index,input:d.input,stack:[...t,e]},o=a(...d,i);if("string"==typeof o&&(o=o.length>0?{type:"text",value:o}:void 0),!1===o?r.lastIndex=n+1:(l!==n&&u.push({type:"text",value:e.value.slice(l,n)}),Array.isArray(o)?u.push(...o):o&&u.push(o),l=n+d[0].length,c=!0),!r.global)break;d=r.exec(e.value)}return c?(l<e.value.length&&u.push({type:"text",value:e.value.slice(l)}),n.children.splice(s,1,...u)):u=[e],s+u.length}(e,t)}}(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ec],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,eu]],{ignore:["link","linkReference"]})}function ec(e,t,n,r,i){let o,a="";if(!ed(i))return!1;if(/^w/i.test(t)&&(n=t+n,t="",a="http://"),(o=n.split(".")).length<2||o[o.length-1]&&(/_/.test(o[o.length-1])||!/[a-zA-Z\d]/.test(o[o.length-1]))||o[o.length-2]&&(/_/.test(o[o.length-2])||!/[a-zA-Z\d]/.test(o[o.length-2])))return!1;let l=function(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")"),i=X(e,"("),o=X(e,")");for(;-1!==r&&i>o;)e+=n.slice(0,r+1),r=(n=n.slice(r+1)).indexOf(")"),o++;return[e,n]}(n+r);if(!l[0])return!1;let s={type:"link",title:null,url:a+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[s,{type:"text",value:l[1]}]:s}function eu(e,t,n,r){return!(!ed(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function ed(e,t){let n=e.input.charCodeAt(e.index-1);return(0===e.index||(0,Q.unicodeWhitespace)(n)||(0,Q.unicodePunctuation)(n))&&(!t||47!==n)}var ep=e.i(657699);function ef(){this.buffer()}function eh(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function em(){this.buffer()}function eg(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function eb(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,J.ok)("footnoteReference"===n.type),n.identifier=(0,ep.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ev(e){this.exit(e)}function ey(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,J.ok)("footnoteDefinition"===n.type),n.identifier=(0,ep.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ek(e){this.exit(e)}function ex(e,t,n,r){let i=n.createTracker(r),o=i.move("[^"),a=n.enter("footnoteReference"),l=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),l(),a(),o+=i.move("]")}function ew(e,t,n){return 0===t?e:eT(e,t,n)}function eT(e,t,n){return(n?"":"    ")+e}ex.peek=function(){return"["};let eS=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function ej(e){this.enter({type:"delete",children:[]},e)}function eM(e){this.exit(e)}function eA(e,t,n,r){let i=n.createTracker(r),o=n.enter("strikethrough"),a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function eL(e){return e.length}function eC(e){let t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:114*(82===t||114===t)}function eE(e){let t=e._align;(0,J.ok)(t,"expected `_align` on table"),this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function eB(e){this.exit(e),this.data.inTable=void 0}function eO(e){this.enter({type:"tableRow",children:[]},e)}function eD(e){this.exit(e)}function eR(e){this.enter({type:"tableCell",children:[]},e)}function eP(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,e_));let n=this.stack[this.stack.length-1];(0,J.ok)("inlineCode"===n.type),n.value=t,this.exit(e)}function e_(e,t){return"|"===t?t:e}function eH(e){let t=this.stack[this.stack.length-2];(0,J.ok)("listItem"===t.type),t.checked="taskListCheckValueChecked"===e.type}function eI(e){let t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){let e=this.stack[this.stack.length-1];(0,J.ok)("paragraph"===e.type);let n=e.children[0];if(n&&"text"===n.type){let r,i=t.children,o=-1;for(;++o<i.length;){let e=i[o];if("paragraph"===e.type){r=e;break}}r===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function eN(e,t,n,r){let i=e.children[0],o="boolean"==typeof e.checked&&i&&"paragraph"===i.type,a="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);o&&l.move(a);let s=O.listItem(e,t,n,{...r,...l.current()});return o&&(s=s.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+a})),s}eA.peek=function(){return"~"};var eF=e.i(383166);let ez={tokenize:function(e,t,n){let r=0;return function t(o){return(87===o||119===o)&&r<3?(r++,e.consume(o),t):46===o&&3===r?(e.consume(o),i):n(o)};function i(e){return null===e?n(e):t(e)}},partial:!0},eV={tokenize:function(e,t,n){let r,i,o;return a;function a(t){return 46===t||95===t?e.check(eW,s,l)(t):null===t||(0,Q.markdownLineEndingOrSpace)(t)||(0,Q.unicodeWhitespace)(t)||45!==t&&(0,Q.unicodePunctuation)(t)?s(t):(o=!0,e.consume(t),a)}function l(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),a}function s(e){return i||r||!o?n(e):t(e)}},partial:!0},eU={tokenize:function(e,t){let n=0,r=0;return i;function i(a){return 40===a?(n++,e.consume(a),i):41===a&&r<n?o(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(eW,t,o)(a):null===a||(0,Q.markdownLineEndingOrSpace)(a)||(0,Q.unicodeWhitespace)(a)?t(a):(e.consume(a),i)}function o(t){return 41===t&&r++,e.consume(t),i}},partial:!0},eW={tokenize:function(e,t,n){return r;function r(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),r):38===a?(e.consume(a),o):93===a?(e.consume(a),i):60===a||null===a||(0,Q.markdownLineEndingOrSpace)(a)||(0,Q.unicodeWhitespace)(a)?t(a):n(a)}function i(e){return null===e||40===e||91===e||(0,Q.markdownLineEndingOrSpace)(e)||(0,Q.unicodeWhitespace)(e)?t(e):r(e)}function o(t){return(0,Q.asciiAlpha)(t)?function t(i){return 59===i?(e.consume(i),r):(0,Q.asciiAlpha)(i)?(e.consume(i),t):n(i)}(t):n(t)}},partial:!0},eq={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return(0,Q.asciiAlphanumeric)(e)?n(e):t(e)}},partial:!0},e$={name:"wwwAutolink",tokenize:function(e,t,n){let r=this;return function(t){return 87!==t&&119!==t||!eX.call(r,r.previous)||e1(r.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(ez,e.attempt(eV,e.attempt(eU,i),n),n)(t))};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:eX},eK={name:"protocolAutolink",tokenize:function(e,t,n){let r=this,i="",o=!1;return function(t){return(72===t||104===t)&&eJ.call(r,r.previous)&&!e1(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),a):n(t)};function a(t){if((0,Q.asciiAlpha)(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),a;if(58===t){let n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),l}return n(t)}function l(t){return 47===t?(e.consume(t),o)?s:(o=!0,l):n(t)}function s(t){return null===t||(0,Q.asciiControl)(t)||(0,Q.markdownLineEndingOrSpace)(t)||(0,Q.unicodeWhitespace)(t)||(0,Q.unicodePunctuation)(t)?n(t):e.attempt(eV,e.attempt(eU,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:eJ},eY={name:"emailAutolink",tokenize:function(e,t,n){let r,i,o=this;return function(t){return!e0(t)||!eQ.call(o,o.previous)||e1(o.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),function t(r){return e0(r)?(e.consume(r),t):64===r?(e.consume(r),a):n(r)}(t))};function a(t){return 46===t?e.check(eq,s,l)(t):45===t||95===t||(0,Q.asciiAlphanumeric)(t)?(i=!0,e.consume(t),a):s(t)}function l(t){return e.consume(t),r=!0,a}function s(a){return i&&r&&(0,Q.asciiAlpha)(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:eQ},eZ={},eG=48;for(;eG<123;)eZ[eG]=eY,58==++eG?eG=65:91===eG&&(eG=97);function eX(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||(0,Q.markdownLineEndingOrSpace)(e)}function eJ(e){return!(0,Q.asciiAlpha)(e)}function eQ(e){return!(47===e||e0(e))}function e0(e){return 43===e||45===e||46===e||95===e||(0,Q.asciiAlphanumeric)(e)}function e1(e){let t=e.length,n=!1;for(;t--;){let r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}eZ[43]=eY,eZ[45]=eY,eZ[46]=eY,eZ[95]=eY,eZ[72]=[eY,eK],eZ[104]=[eY,eK],eZ[87]=[eY,e$],eZ[119]=[eY,e$];e.i(383500);var e2=e.i(959323),e3=e.i(526912);let e8={tokenize:function(e,t,n){let r=this;return(0,e3.factorySpace)(e,function(e){let i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function e6(e,t,n){let r,i=this,o=i.events.length,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);for(;o--;){let e=i.events[o][1];if("labelImage"===e.type){r=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(o){if(!r||!r._balanced)return n(o);let l=(0,ep.normalizeIdentifier)(i.sliceSerialize({start:r.end,end:i.now()}));return 94===l.codePointAt(0)&&a.includes(l.slice(1))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)):n(o)}}function e5(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;let o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function e4(e,t,n){let r,i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]),a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),l};function l(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",s)}function s(l){if(a>999||93===l&&!r||null===l||91===l||(0,Q.markdownLineEndingOrSpace)(l))return n(l);if(93===l){e.exit("chunkString");let r=e.exit("gfmFootnoteCallString");return o.includes((0,ep.normalizeIdentifier)(i.sliceSerialize(r)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(l)}return(0,Q.markdownLineEndingOrSpace)(l)||(r=!0),a++,e.consume(l),92===l?c:s}function c(t){return 91===t||92===t||93===t?(e.consume(t),a++,s):s(t)}}function e9(e,t,n){let r,i,o=this,a=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),l=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),s};function s(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(l>999||93===t&&!i||null===t||91===t||(0,Q.markdownLineEndingOrSpace)(t))return n(t);if(93===t){e.exit("chunkString");let n=e.exit("gfmFootnoteDefinitionLabelString");return r=(0,ep.normalizeIdentifier)(o.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return(0,Q.markdownLineEndingOrSpace)(t)||(i=!0),l++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),l++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a.includes(r)||a.push(r),(0,e3.factorySpace)(e,p,"gfmFootnoteDefinitionWhitespace")):n(t)}function p(e){return t(e)}}function e7(e,t,n){return e.check(e2.blankLine,t,e.attempt(e8,t,n))}function te(e){e.exit("gfmFootnoteDefinition")}var tt=e.i(847202),tn=e.i(433565);class tr{add(e,t,n){!function(e,t,n,r){let i=0;if(0!==n||0!==r.length){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length,n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(let t of r)e.push(t);r=n.pop()}this.map.length=0}constructor(){this.map=[]}}function ti(e,t,n){let r,i=this,o=0,a=0;return function(e){let t=i.events.length-1;for(;t>-1;){let e=i.events[t][1].type;if("lineEnding"===e||"linePrefix"===e)t--;else break}let r=t>-1?i.events[t][1].type:null,o="tableHead"===r||"tableRow"===r?v:l;return o===v&&i.parser.lazy[i.now().line]?n(e):o(e)};function l(t){var n;return e.enter("tableHead"),e.enter("tableRow"),124===(n=t)||(r=!0,a+=1),s(n)}function s(t){return null===t?n(t):(0,Q.markdownLineEnding)(t)?a>1?(a=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):(0,Q.markdownSpace)(t)?(0,e3.factorySpace)(e,s,"whitespace")(t):(a+=1,r&&(r=!1,o+=1),124===t)?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,s):(e.enter("data"),c(t))}function c(t){return null===t||124===t||(0,Q.markdownLineEndingOrSpace)(t)?(e.exit("data"),s(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return(i.interrupt=!1,i.parser.lazy[i.now().line])?n(t):(e.enter("tableDelimiterRow"),r=!1,(0,Q.markdownSpace)(t))?(0,e3.factorySpace)(e,p,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):p(t)}function p(t){return 45===t||58===t?h(t):124===t?(r=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),f):n(t)}function f(t){return(0,Q.markdownSpace)(t)?(0,e3.factorySpace)(e,h,"whitespace")(t):h(t)}function h(t){return 58===t?(a+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(a+=1,m(t)):null===t||(0,Q.markdownLineEnding)(t)?b(t):n(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),function t(n){return 45===n?(e.consume(n),t):58===n?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(n),e.exit("tableDelimiterMarker"),g):(e.exit("tableDelimiterFiller"),g(n))}(t)):n(t)}function g(t){return(0,Q.markdownSpace)(t)?(0,e3.factorySpace)(e,b,"whitespace")(t):b(t)}function b(i){if(124===i)return p(i);if(null===i||(0,Q.markdownLineEnding)(i))return r&&o===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(i)):n(i);return n(i)}function v(t){return e.enter("tableRow"),y(t)}function y(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),y):null===n||(0,Q.markdownLineEnding)(n)?(e.exit("tableRow"),t(n)):(0,Q.markdownSpace)(n)?(0,e3.factorySpace)(e,y,"whitespace")(n):(e.enter("data"),k(n))}function k(t){return null===t||124===t||(0,Q.markdownLineEndingOrSpace)(t)?(e.exit("data"),y(t)):(e.consume(t),92===t?x:k)}function x(t){return 92===t||124===t?(e.consume(t),k):k(t)}}function to(e,t){let n,r,i,o=-1,a=!0,l=0,s=[0,0,0,0],c=[0,0,0,0],u=!1,d=0,p=new tr;for(;++o<e.length;){let f=e[o],h=f[1];"enter"===f[0]?"tableHead"===h.type?(u=!1,0!==d&&(tl(p,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},h.start),end:Object.assign({},h.end)},p.add(o,0,[["enter",n,t]])):"tableRow"===h.type||"tableDelimiterRow"===h.type?(a=!0,i=void 0,s=[0,0,0,0],c=[0,o+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},h.start),end:Object.assign({},h.end)},p.add(o,0,[["enter",r,t]])),l="tableDelimiterRow"===h.type?2:r?3:1):l&&("data"===h.type||"tableDelimiterMarker"===h.type||"tableDelimiterFiller"===h.type)?(a=!1,0===c[2]&&(0!==s[1]&&(c[0]=c[1],i=ta(p,t,s,l,void 0,i),s=[0,0,0,0]),c[2]=o)):"tableCellDivider"===h.type&&(a?a=!1:(0!==s[1]&&(c[0]=c[1],i=ta(p,t,s,l,void 0,i)),c=[(s=c)[1],o,0,0])):"tableHead"===h.type?(u=!0,d=o):"tableRow"===h.type||"tableDelimiterRow"===h.type?(d=o,0!==s[1]?(c[0]=c[1],i=ta(p,t,s,l,o,i)):0!==c[1]&&(i=ta(p,t,c,l,o,i)),l=0):l&&("data"===h.type||"tableDelimiterMarker"===h.type||"tableDelimiterFiller"===h.type)&&(c[3]=o)}for(0!==d&&tl(p,t,d,n,r),p.consume(t.events),o=-1;++o<t.events.length;){let e=t.events[o];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=function(e,t){let n=!1,r=[];for(;t<e.length;){let i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){let e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}(t.events,o))}return e}function ta(e,t,n,r,i,o){0!==n[0]&&(o.end=Object.assign({},ts(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));let a=ts(t.events,n[1]);if(o={type:1===r?"tableHeader":2===r?"tableDelimiter":"tableData",start:Object.assign({},a),end:Object.assign({},a)},e.add(n[1],0,[["enter",o,t]]),0!==n[2]){let i=ts(t.events,n[2]),o=ts(t.events,n[3]),a={type:"tableContent",start:Object.assign({},i),end:Object.assign({},o)};if(e.add(n[2],0,[["enter",a,t]]),2!==r){let r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){let t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==i&&(o.end=Object.assign({},ts(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function tl(e,t,n,r,i){let o=[],a=ts(t.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,t])),r.end=Object.assign({},a),o.push(["exit",r,t]),e.add(n+1,0,o)}function ts(e,t){let n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}RegExp("^"+/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi.source,"i");let tc={name:"tasklistCheck",tokenize:function(e,t,n){let r=this;return function(t){return null===r.previous&&r._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i):n(t)};function i(t){return(0,Q.markdownLineEndingOrSpace)(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(r){return(0,Q.markdownLineEnding)(r)?t(r):(0,Q.markdownSpace)(r)?e.check({tokenize:tu},t,n)(r):n(r)}}};function tu(e,t,n){return(0,e3.factorySpace)(e,function(e){return null===e?n(e):t(e)},"whitespace")}let td={};function tp(e){var t;let n,r,i,o=e||td,a=this.data(),l=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),c=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);l.push((t=o,(0,eF.combineExtensions)([{text:eZ},{document:{91:{name:"gfmFootnoteDefinition",tokenize:e9,continuation:{tokenize:e7},exit:te}},text:{91:{name:"gfmFootnoteCall",tokenize:e4},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:e6,resolveTo:e5}}},(n=(t||{}).singleTilde,r={name:"strikethrough",tokenize:function(e,t,r){let i=this.previous,o=this.events,a=0;return function(l){return 126===i&&"characterEscape"!==o[o.length-1][1].type?r(l):(e.enter("strikethroughSequenceTemporary"),function o(l){let s=(0,f.classifyCharacter)(i);if(126===l)return a>1?r(l):(e.consume(l),a++,o);if(a<2&&!n)return r(l);let c=e.exit("strikethroughSequenceTemporary"),u=(0,f.classifyCharacter)(l);return c._open=!u||2===u&&!!s,c._close=!s||2===s&&!!u,t(l)}(l))}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset==e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";let i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},o={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",o,t]],l=t.parser.constructs.insideSpan.null;l&&(0,tt.splice)(a,a.length,0,(0,tn.resolveAll)(l,e.slice(r+1,n),t)),(0,tt.splice)(a,a.length,0,[["exit",o,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),(0,tt.splice)(e,r-1,n-r+3,a),n=r+a.length-2;break}}for(n=-1;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}},null==n&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}}),{flow:{null:{name:"table",tokenize:ti,resolveAll:to}}},{text:{91:tc}}]))),s.push([{transforms:[es],enter:{literalAutolink:en,literalAutolinkEmail:er,literalAutolinkHttp:er,literalAutolinkWww:er},exit:{literalAutolink:el,literalAutolinkEmail:ea,literalAutolinkHttp:ei,literalAutolinkWww:eo}},{enter:{gfmFootnoteCallString:ef,gfmFootnoteCall:eh,gfmFootnoteDefinitionLabelString:em,gfmFootnoteDefinition:eg},exit:{gfmFootnoteCallString:eb,gfmFootnoteCall:ev,gfmFootnoteDefinitionLabelString:ey,gfmFootnoteDefinition:ek}},{canContainEols:["delete"],enter:{strikethrough:ej},exit:{strikethrough:eM}},{enter:{table:eE,tableData:eR,tableHeader:eR,tableRow:eO},exit:{codeText:eP,table:eB,tableData:eD,tableHeader:eD,tableRow:eD}},{exit:{taskListCheckValueChecked:eH,taskListCheckValueUnchecked:eH,paragraph:eI}}]),c.push({extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ee,notInConstruct:et},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ee,notInConstruct:et},{character:":",before:"[ps]",after:"\\/",inConstruct:ee,notInConstruct:et}]},(i=!1,o&&o.firstLineBlank&&(i=!0),{handlers:{footnoteDefinition:function(e,t,n,r){let o=n.createTracker(r),a=o.move("[^"),l=n.enter("footnoteDefinition"),s=n.enter("label");return a+=o.move(n.safe(n.associationId(e),{before:a,after:"]"})),s(),a+=o.move("]:"),e.children&&e.children.length>0&&(o.shift(4),a+=o.move((i?"\n":" ")+n.indentLines(n.containerFlow(e,o.current()),i?eT:ew))),l(),a},footnoteReference:ex},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:eS}],handlers:{delete:eA}},function(e){let t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=O.inlineCode(e,t,n);return n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&")),r},table:function(e,t,n,r){return l(function(e,t,n){let r=e.children,i=-1,o=[],a=t.enter("table");for(;++i<r.length;)o[i]=s(r[i],t,n);return a(),o}(e,n,r),e.align)},tableCell:a,tableRow:function(e,t,n,r){let i=l([s(e,n,r)]);return i.slice(0,i.indexOf("\n"))}}};function a(e,t,n,r){let i=n.enter("tableCell"),a=n.enter("phrasing"),l=n.containerPhrasing(e,{...r,before:o,after:o});return a(),i(),l}function l(e,t){return function(e,t){let n=t||{},r=(n.align||[]).concat(),i=n.stringLength||eL,o=[],a=[],l=[],s=[],c=0,u=-1;for(;++u<e.length;){let t=[],r=[],o=-1;for(e[u].length>c&&(c=e[u].length);++o<e[u].length;){var d;let a=null==(d=e[u][o])?"":String(d);if(!1!==n.alignDelimiters){let e=i(a);r[o]=e,(void 0===s[o]||e>s[o])&&(s[o]=e)}t.push(a)}a[u]=t,l[u]=r}let p=-1;if("object"==typeof r&&"length"in r)for(;++p<c;)o[p]=eC(r[p]);else{let e=eC(r);for(;++p<c;)o[p]=e}p=-1;let f=[],h=[];for(;++p<c;){let e=o[p],t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let i=!1===n.alignDelimiters?1:Math.max(1,s[p]-t.length-r.length),a=t+"-".repeat(i)+r;!1!==n.alignDelimiters&&((i=t.length+i+r.length)>s[p]&&(s[p]=i),h[p]=i),f[p]=a}a.splice(1,0,f),l.splice(1,0,h),u=-1;let m=[];for(;++u<a.length;){let e=a[u],t=l[u];p=-1;let r=[];for(;++p<c;){let i=e[p]||"",a="",l="";if(!1!==n.alignDelimiters){let e=s[p]-(t[p]||0),n=o[p];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),l=" ".repeat(e/2-.5)):l=a=" ".repeat(e/2):l=" ".repeat(e)}!1===n.delimiterStart||p||r.push("|"),!1!==n.padding&&(!1!==n.alignDelimiters||""!==i)&&(!1!==n.delimiterStart||p)&&r.push(" "),!1!==n.alignDelimiters&&r.push(a),r.push(i),!1!==n.alignDelimiters&&r.push(l),!1!==n.padding&&r.push(" "),(!1!==n.delimiterEnd||p!==c-1)&&r.push("|")}m.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return m.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function s(e,t,n){let r=e.children,i=-1,o=[],l=t.enter("tableRow");for(;++i<r.length;)o[i]=a(r[i],e,t,n);return l(),o}}(o),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:eN}}]})}var tf=e.i(145897),th=e.i(331835);function tm(e){return{type:th.SparkTypes.Block.Paragraph,content:tv(e)}}function tg(e){if("text"===e.type||"inlineCode"===e.type)return e.value;if("emphasis"===e.type)return(e.children||[]).map(tg).join("");if("strong"===e.type)return(e.children||[]).map(tg).join("");if("link"===e.type)return(e.children||[]).map(tg).join("");else if("listItem"===e.type)return(e.children||[]).map(tg).join(" ");else if("children"in e&&Array.isArray(e.children))return e.children.map(tg).join("");return""}(t||(t={})).parse=e=>{if(!e||""===e.trim())return th.SparkTypes.EMPTY_DOCUMENT;try{let r=G().use(tp).parse(e),i=[];for(let e of r.children||[]){var t,n;"paragraph"===e.type?i.push(tm(e)):"heading"===e.type?i.push((t=e).depth>=3?{type:th.SparkTypes.Block.Paragraph,content:tv(t)}:{type:th.SparkTypes.Block.Heading,attrs:{level:t.depth},content:tv(t)}):"list"===e.type?i.push(function e(t){let n=[];for(let r of t.children||[])if("listItem"===r.type){let t=[];for(let n of r.children||[])if("paragraph"===n.type)t.push(tm(n));else if("list"===n.type){let r=e(n);t.push(r)}n.push({type:th.SparkTypes.Block.ListItem,content:t})}return{type:t.ordered?th.SparkTypes.Block.OrderedList:th.SparkTypes.Block.BulletList,content:n}}(e)):"code"===e.type?i.push((n=e,{type:th.SparkTypes.Block.CodeBlock,attrs:{language:n.lang||void 0},content:[{type:th.SparkTypes.Inline.Text,text:n.value}]})):"thematicBreak"===e.type?i.push({type:th.SparkTypes.Block.HorizontalRule}):"blockquote"===e.type&&i.push(function(e){let t=[],n=[];for(let t of e.children)if("paragraph"===t.type){let e=tg(t);e&&n.push(e.replace(/\s+$/,""))}else if("list"===t.type)n.push(function e(t,n){let r="  ".repeat(n);return t.children.map((i,o)=>{let a=t.ordered?"".concat(o+1,". "):" ",l="";for(let t of i.children||[])"paragraph"===t.type?l+=tg(t):"list"===t.type?l+="\n"+e(t,n+1):l+=tg(t);return"".concat(r).concat(a).concat(l.replace(/\s+$/,""))}).join("\n")}(t,0));else{let e=tg(t);e&&n.push(e.replace(/\s+$/,""))}if(n.length>0){let e=n.join("\n\n");t.push({type:th.SparkTypes.Inline.Text,text:e})}return{type:th.SparkTypes.Block.Blockquote,content:t}}(e))}return{type:"doc",content:i}}catch(e){return console.error("Error parsing markdown:",e),th.SparkTypes.EMPTY_DOCUMENT}};let tb={[th.SparkTypes.Mark.Bold]:1,[th.SparkTypes.Mark.Italic]:2,[th.SparkTypes.Mark.Underline]:3,[th.SparkTypes.Mark.Code]:4,[th.SparkTypes.Mark.Link]:5};function tv(e){let t=[];return function e(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let i of n.children||[])!function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=function(e){let t=[];for(let n of e)"emphasis"===n.type?t.push({type:th.SparkTypes.Mark.Italic}):"strong"===n.type?t.push({type:th.SparkTypes.Mark.Bold}):"link"===n.type&&n.url&&t.push({type:th.SparkTypes.Mark.Link,attrs:{href:n.url}});return(0,tf.sortBy)(t,e=>tb[e.type]||999)}(r);"text"===n.type?t.push({type:th.SparkTypes.Inline.Text,text:n.value,marks:i.length>0?i:void 0}):"inlineCode"===n.type?t.push({type:th.SparkTypes.Inline.Text,text:n.value,marks:[...i,{type:th.SparkTypes.Mark.Code}]}):"emphasis"===n.type?e(n,[...r,{type:"emphasis"}]):"strong"===n.type?e(n,[...r,{type:"strong"}]):"link"===n.type?e(n,[...r,{type:"link",url:n.url}]):"children"in n&&e(n,r)}(i,r)}(e,[]),t}e.s(["SparkMarkdown",()=>t],112977)},657584,323610,359323,423490,147534,180631,780486,60675,68101,135641,84361,555142,951920,763164,e=>{"use strict";var t,n,r,i,o,a,l,s,c,u,d,p,f,h,m,g,b,v,y,k,x,w,T=e.i(391398),S=e.i(191788),j=e.i(988124),M=e.i(93954);e.s(["BaseSparkEditor",()=>rY,"SparkEditorType",()=>rK],763164);var A=e.i(359626),L=e.i(989226),C=e.i(361183),E=e.i(272043),B=e.i(476979),O=e.i(332587),D=e.i(922323),R=e.i(86316),P=e.i(451588),_=e.i(112977),H=e.i(331835),I=e.i(801560),N=e.i(106946),F=e.i(827283);function z(){return(z=Object.assign.bind()).apply(null,arguments)}let V=e=>S.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),l||(l=S.createElement("g",{fill:"currentColor",fillRule:"evenodd"},S.createElement("path",{d:"M6.6 3.5a.9.9 0 1 0 1.8 0 .9.9 0 0 0-1.8 0M7.5 1a2.5 2.5 0 1 0 .209 4.991A3.8 3.8 0 0 1 5.912 7.38l-.19.071a.8.8 0 1 0 .557 1.5l.19-.071A5.42 5.42 0 0 0 10 3.799h-.018A2.5 2.5 0 0 0 7.5 1m5.1 2.5a.9.9 0 1 0 1.8 0 .9.9 0 0 0-1.8 0m.9-2.5a2.5 2.5 0 1 0 .21 4.991 3.8 3.8 0 0 1-1.798 1.388l-.19.071a.8.8 0 0 0 .557 1.5l.19-.071a5.42 5.42 0 0 0 3.532-5.08h-.019A2.5 2.5 0 0 0 13.5 1"}),S.createElement("path",{fillRule:"nonzero",d:"M1.8 2A.8.8 0 1 0 .2 2zM.2 14a.8.8 0 0 0 1.6 0zm0-12v12h1.6V2z"}))));function U(){return(U=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,V],323610);let W=e=>S.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),s||(s=S.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6,d:"M15 7.1v-.7c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C12.72 1.6 11.88 1.6 10.2 1.6H5.5c-1.398 0-2.097 0-2.648.228a3 3 0 0 0-1.624 1.624C1 4.003 1 4.702 1 6.1v1c0 .464 0 .697.026.892a3 3 0 0 0 2.582 2.582c.195.026.428.026.892.026v0H5"})),c||(c=S.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:1.6,d:"m8.088 7.071.476 7.93a.2.2 0 0 0 .367.098l2.078-3.148a.2.2 0 0 1 .155-.089l3.765-.226a.2.2 0 0 0 .099-.367l-6.63-4.377a.2.2 0 0 0-.31.18Z"})));function q(){return(q=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,W],359323);let $=e=>S.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),u||(u=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.8 2.4a.8.8 0 0 1-.8.8h-1.5a.8.8 0 0 1 0-1.6H14a.8.8 0 0 1 .8.8m-4.5 0a.8.8 0 0 1-.8.8h-3a.8.8 0 0 1 0-1.6h3a.8.8 0 0 1 .8.8m-6 0a.8.8 0 0 1-.8.8H2a.8.8 0 0 1 0-1.6h1.5a.8.8 0 0 1 .8.8M14.8 8a.8.8 0 0 1-.8.8H2a.8.8 0 1 1 0-1.6h12a.8.8 0 0 1 .8.8m-.8 6.4a.8.8 0 0 0 0-1.6h-1.5a.8.8 0 0 0 0 1.6zm-4.5 0a.8.8 0 0 0 0-1.6h-3a.8.8 0 0 0 0 1.6zm-6 0a.8.8 0 0 0 0-1.6H2a.8.8 0 0 0 0 1.6z",clipRule:"evenodd"})));function K(){return(K=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,$],423490);let Y=e=>S.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),d||(d=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.38 1.83c-.182-.027-.414-.03-.98-.03-.757 0-1.283 0-1.693.03-.402.03-.63.084-.802.16A2.2 2.2 0 0 0 2.79 3.105c-.076.171-.13.4-.16.802-.03.41-.03.936-.03 1.694V9.06c0 1.407.002 2.384.099 3.12.094.716.266 1.087.521 1.35a1 1 0 0 0 .05.05c.263.255.634.427 1.35.521.736.097 1.713.099 3.12.099s2.383-.002 3.12-.099c.715-.094 1.087-.266 1.35-.521l.05-.05c.255-.263.426-.634.52-1.35.098-.736.1-1.713.1-3.12v-.406c0-.99-.009-1.5-.077-1.854h-.679c-.896 0-1.648 0-2.246-.08-.633-.085-1.212-.274-1.679-.74-.466-.466-.654-1.045-.74-1.679-.08-.598-.08-1.35-.08-2.246V1.83Zm4.227 3.37q-.191-.177-.43-.394L8.982 2.81c.004.539.019.948.063 1.278.062.456.166.641.286.76.12.12.304.225.76.286.378.05.857.062 1.516.065ZM7.763.272C7.393.2 7.013.2 6.475.2H6.37c-.72 0-1.304 0-1.78.035-.49.035-.926.11-1.337.294a3.8 3.8 0 0 0-1.925 1.925c-.183.411-.259.847-.294 1.337C1 4.266 1 4.85 1 5.57v3.546c0 1.337 0 2.42.113 3.273.117.888.368 1.645.958 2.254l.085.085c.609.59 1.366.841 2.254.959.854.112 1.936.112 3.273.112h.114c1.336 0 2.419 0 3.272-.113.888-.117 1.646-.368 2.255-.958l.085-.085c.59-.609.84-1.366.958-2.254.112-.854.112-1.936.112-3.273v-.622c.001-1.152.002-1.969-.324-2.706s-.93-1.285-1.784-2.06l-.118-.107-2.22-2.018-.054-.05c-.399-.362-.68-.618-1.003-.811a3.8 3.8 0 0 0-1.213-.47",clipRule:"evenodd"})));function Z(){return(Z=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,Y],147534);let G=e=>S.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),p||(p=S.createElement("g",{clipPath:"url(#Heading1_svg__a)"},S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.6 3.3a.8.8 0 1 0-1.6 0v9.8a.8.8 0 0 0 1.6 0v-4h4.8v4a.8.8 0 0 0 1.6 0V3.3a.8.8 0 1 0-1.6 0v4.2H1.6zm8.4 2a.8.8 0 1 0 0 1.6h1.3c.22 0 .4.18.4.4v5H10a.8.8 0 0 0 0 1.6h5a.8.8 0 0 0 0-1.6h-1.7v-5a2 2 0 0 0-2-2z",clipRule:"evenodd"}))),f||(f=S.createElement("defs",null,S.createElement("clipPath",{id:"Heading1_svg__a"},S.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))));function X(){return(X=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,G],180631);let J=e=>S.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),h||(h=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.6 3.3a.8.8 0 1 0-1.6 0v9.8a.8.8 0 0 0 1.6 0v-4h4.8v4a.8.8 0 0 0 1.6 0V3.3a.8.8 0 1 0-1.6 0v4.2H1.6zm10.673 2c-1.493 0-2.708 1-3.049 2.355a.8.8 0 0 0 1.552.39A1.52 1.52 0 0 1 12.273 6.9h.686c.714 0 1.241.55 1.241 1.165a1 1 0 0 1-.06.337c-.041.112-.13.231-.308.372-.188.148-.418.276-.709.438l-.875.483a7.33 7.33 0 0 0-2.95 3.022A.8.8 0 0 0 10 13.9h5a.8.8 0 0 0 0-1.6h-3.485c.429-.481.938-.89 1.507-1.204l.875-.484.034-.019c.26-.144.595-.329.89-.562.318-.25.643-.593.82-1.078a2.6 2.6 0 0 0 .159-.888c0-1.556-1.301-2.765-2.841-2.765z",clipRule:"evenodd"})));function Q(){return(Q=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,J],780486);let ee=e=>S.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),m||(m=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 .25h-.042c-1.369 0-2.454 0-3.32.088-.888.09-1.629.279-2.277.712A4.8 4.8 0 0 0 1.05 2.361C.617 3.009.428 3.75.338 4.638.25 5.504.25 6.589.25 7.958v.084l.088 3.32c.09.888.279 1.629.712 2.277a4.8 4.8 0 0 0 1.311 1.311c.648.433 1.389.622 2.277.712.866.088 1.951.088 3.32.088h.084l3.32-.088c.888-.09 1.629-.279 2.277-.712a4.8 4.8 0 0 0 1.311-1.311c.433-.648.622-1.389.712-2.277.088-.866.088-1.951.088-3.32v-.084l-.088-3.32c-.09-.888-.279-1.629-.712-2.277a4.8 4.8 0 0 0-1.311-1.311C12.991.617 12.25.428 11.362.338 10.496.25 9.411.25 8.042.25zM3.194 2.298c.361-.241.826-.389 1.595-.467.782-.08 1.79-.08 3.21-.08l3.21.08c.769.078 1.235.226 1.595.467.355.237.66.542.897.897.241.361.389.826.467 1.595.079.782.08 1.79.08 3.21v.403l-.08-.073c-.586-.526-1.401-1.08-2.351-1.08-.676 0-1.165.441-1.478.809-.325.382-.616.873-.864 1.292l-.006.011-.719 1.102c-.196.236-.295.27-.308.274-.168-.001-.368-.054-.63-.168l-.412-.197-.064-.032-.397-.195c-.307-.143-.706-.303-1.142-.312a1.8 1.8 0 0 0-1.335.555c-.551.544-1.2 1.348-1.696 1.993l-.398.525-.072-.103c-.241-.361-.389-.826-.467-1.595-.08-.782-.08-1.79-.08-3.21l.08-3.21c.078-.769.226-1.235.467-1.595a3.3 3.3 0 0 1 .897-.897zm9.974 7.149c.4.359.753.778 1.047 1.14l-.046.623c-.078.769-.226 1.235-.467 1.595a3.3 3.3 0 0 1-.897.897c-.361.241-.826.389-1.595.467-.782.079-1.79.08-3.21.08s-2.429-.001-3.21-.08c-.559-.057-.958-.151-1.273-.291l.439-.581 1.562-1.841c.116-.115.187-.123.25-.122.109.002.272.047.542.172l.348.171.069.035.489.233c.342.149.765.293 1.234.293.674 0 1.155-.455 1.455-.816.306-.368.585-.839.826-1.247l.03-.05.723-1.096a1.2 1.2 0 0 1 .264-.248.3.3 0 0 1 .06-.031l.011-.003c.377 0 .836.236 1.35.697zM4.75 5.5a.75.75 0 1 1 1.5 0 .75.75 0 0 1-1.5 0m.75-2.25A2.25 2.25 0 1 0 7.75 5.5v-.001A2.25 2.25 0 0 0 5.501 3.25z"})));function et(){return(et=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,ee],60675);let en=e=>S.createElement("svg",et({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),g||(g=S.createElement("path",{fill:"currentColor",d:"M2 1.32a.68.68 0 0 0 0 1.36zm0 4a.68.68 0 0 0 0 1.36zm3 1.36a.68.68 0 0 0 0-1.36zm-3-4h.3V1.32H2zm.82.52V6h1.36V3.2zm.68 2.12H2v1.36h1.5zm0 1.36H5V5.32H3.5zm-1.2-4a.52.52 0 0 1 .52.52h1.36A1.88 1.88 0 0 0 2.3 1.32z"})),b||(b=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 2.8a.8.8 0 0 1 .8-.8h5a.8.8 0 0 1 0 1.6h-5a.8.8 0 0 1-.8-.8m0 5.5a.8.8 0 0 1 .8-.8h5a.8.8 0 0 1 0 1.6h-5a.8.8 0 0 1-.8-.8m.8 4.7a.8.8 0 0 0 0 1.6h5a.8.8 0 0 0 0-1.6z",clipRule:"evenodd"})),v||(v=S.createElement("path",{fill:"currentColor",d:"m2 14-.623-.272A.68.68 0 0 0 2 14.68zm3 .68a.68.68 0 1 0 0-1.36zm-3.665-4.57a.68.68 0 1 0 1.33.28zm2.029-.43h.411V8.32h-.411zM2 14.68h3v-1.36H2zm1.775-5c.217 0 .545.234.545.723h1.36c0-1.06-.769-2.083-1.905-2.083zm-.411-1.36c-1.074 0-1.83.843-2.03 1.79l1.331.28c.103-.487.427-.71.699-.71zm-.042 3.105-.04.027.747 1.136.041-.027zm-1.93 2.27-.015.033 1.246.544.015-.033zm1.89-2.243a5.16 5.16 0 0 0-1.89 2.243l1.246.544a3.8 3.8 0 0 1 1.391-1.652l-.748-1.135Zm1.038-1.049c0 .122-.052.258-.232.443-.19.195-.45.371-.766.579l.748 1.135c.291-.191.682-.446.992-.765.32-.329.618-.787.618-1.392z"})));function er(){return(er=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,en],68101);let ei=e=>S.createElement("svg",er({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),y||(y=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.2 3.9a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4m0 11a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4m1.2-6.7a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0m2.8-6.3a.8.8 0 0 0 0 1.6h8a.8.8 0 0 0 0-1.6zm0 5.5a.8.8 0 0 0 0 1.6h8a.8.8 0 0 0 0-1.6zm-.8 6.3a.8.8 0 0 1 .8-.8h8a.8.8 0 0 1 0 1.6h-8a.8.8 0 0 1-.8-.8",clipRule:"evenodd"})));e.s(["default",0,ei],135641);var eo=e.i(82602),ea=e.i(755453);e.i(6795);var el=e.i(175863);e.i(101067);var es=e.i(615505),ec=e.i(679905),eu=e.i(863867),ed=e.i(43298);let ep=(0,e.i(411218).createRandomStringFunc)(e=>{let t=new Uint8Array(e);if(window.crypto)window.crypto.getRandomValues(t);else for(let n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}),ef=e=>{var t;let{nodeName:n,view:r,event:i}=e;return!((null==(t=r.state.selection.$anchor.nodeAfter)?void 0:t.type.name)!=n||i.metaKey||i.ctrlKey||eh.includes(i.key))},eh=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Enter","Tab"],em=e=>{let{selection:t}=e,{$anchor:n,empty:r}=t,i=1===n.depth,o=!t.$anchor.parent.isLeaf&&!t.$anchor.parent.textContent;return!!r&&!!(i&&o)},eg=ea.Node.create({name:H.SparkTypes.Block.Attachment,group:"block",draggable:!0,selectable:!0,addAttributes:()=>({file_url:{default:null},file_name:{default:null},file_size_bytes:{default:null},mime_type:{default:null},uploader_user_api_id:{default:null}}),parseHTML:()=>[{tag:H.SparkTypes.Block.Attachment}],renderHTML(e){let{HTMLAttributes:t}=e;return[H.SparkTypes.Block.Attachment,(0,ea.mergeAttributes)(t)]},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,selected:n}=e;return(0,T.jsx)(eb,{attrs:t.attrs,selected:n})}),addProseMirrorPlugins(){return[ey({userApiId:this.options.userApiId,uploadAttachment:this.options.uploadAttachment,t:this.options.t}),new el.Plugin({props:{handleKeyDown:(e,t)=>ef({nodeName:H.SparkTypes.Block.Attachment,view:e,event:t})}})]}}),eb=e=>{let{attrs:t,selected:n}=e;return(0,T.jsxs)(C.NodeViewWrapper,{"data-drag-handle":!0,children:[(0,T.jsxs)("div",{className:"jsx-8270f29d07abd37a "+((0,E.default)("attachment-container selectable",{selected:n})||""),children:[(0,T.jsxs)("div",{className:"jsx-8270f29d07abd37a",children:[(0,T.jsx)("div",{className:"jsx-8270f29d07abd37a",children:t.file_name}),(0,T.jsx)("div",{className:"jsx-8270f29d07abd37a text-secondary fs-xs",children:(0,ed.bytesToSize)(t.file_size_bytes)})]}),(0,T.jsx)(ec.LuxLink,{href:t.file_url,className:"btn btn-a open-btn",children:(0,T.jsx)(eu.default,{})})]}),(0,T.jsx)(A.default,{id:"8270f29d07abd37a",children:".selected.jsx-8270f29d07abd37a,.within-selection.jsx-8270f29d07abd37a{border:1px solid var(--editor-selected-node-border-color);box-shadow:0 0 0 1px var(--editor-selected-node-border-color)}.attachment-container.jsx-8270f29d07abd37a{border-radius:var(--border-radius);background-color:var(--opacity-light);justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding:.625rem 1rem;display:flex}"})]})},ev=new el.PluginKey("attachmentPlugin"),ey=e=>{let{userApiId:t,uploadAttachment:n,t:r}=e,i=new el.Plugin({key:ev,props:{decorations:e=>i.getState(e),handleDrop:(e,i)=>{var o;if(!(null==(o=i.dataTransfer)?void 0:o.files.length))return!1;let a=e.posAtCoords({left:i.clientX,top:i.clientY});if(!a)return!1;let[l]=Array.from(i.dataTransfer.files).filter(e=>H.SparkTypes.Attachment.Types.includes(e.type));return!!l&&(ek({view:e,file:l,dropPosition:a.pos,userApiId:t,uploadAttachment:n,t:r}),!0)}},state:{init:()=>es.DecorationSet.empty,apply(e,t){t=t.map(e.mapping,e.doc);let n=e.getMeta(i);if(n&&n.add){let r=document.createElement("div");r.style.cssText="padding: 0.625rem 1rem; border-radius: var(--border-radius); background-color: var(--opacity-8); margin-bottom: 1.5rem;";let i=document.createElement("div");i.innerText="Uploading ".concat(n.add.file.name),i.className="text-secondary-alpha",r.append(i);let o=document.createElement("div");o.innerText=(0,ed.bytesToSize)(n.add.file.size),o.className="text-secondary fs-xs",r.append(o);let a=es.Decoration.widget(n.add.pos,r,{id:n.add.id});t=t.add(e.doc,[a])}else n&&n.remove&&(t=t.remove(t.find(void 0,void 0,e=>e.id==n.remove.id)));return t}}});return i},ek=async e=>{let{view:t,file:n,userApiId:r,dropPosition:i,uploadAttachment:o,t:a}=e;if(!t.state.selection.$from.parent.inlineContent||!n)return;t.focus();let l=n.name+"-"+ep(10),s=t.state.tr;s.selection.empty||s.deleteSelection(),s.setMeta(ev,{add:{id:l,pos:i||s.selection.from,file:n}}),t.dispatch(s);try{let e=await o({file:n,t:a});if(!e)throw Error("Attachment not uploaded");let i=ev.getState(t.state).find(null,null,e=>e.id==l),s=i.length?i[0].from:null;if(null==s)return;t.dispatch(t.state.tr.replaceWith(s,s,t.state.schema.nodes.attachment.create({file_url:e,file_name:n.name,file_size_bytes:n.size,mime_type:n.type,uploader_user_api_id:r})).setMeta(ev,{remove:{id:l}}))}catch(e){t.dispatch(s.setMeta(ev,{remove:{id:l}}))}},ex=S.default.forwardRef((e,t)=>{let{editor:n,uploadAttachment:r,userApiId:i}=e,o=(0,R.useT)(),a=async e=>{if(e&&e.length)for(let t of e)ek({view:null==n?void 0:n.view,file:t,userApiId:i,uploadAttachment:r,t:o});else(0,eo.toastError)("We don't recognize that file. Only PDF files are supported.")};return(0,T.jsx)("input",{ref:t,onChange:e=>{a(e.target.files),e.target.value=""},multiple:!1,accept:H.SparkTypes.Attachment.Types.join(","),type:"file",autoComplete:"off",tabIndex:-1,style:{display:"none"}})});var ew=e.i(426778),eT=e.i(538865),eS=e.i(454657),ej=e.i(992354),eM=e.i(883720),eA=e.i(503892);let eL=e=>{let{editor:t,show:n,onHide:r}=e,i=(0,R.useT)(),o=S.default.useMemo(()=>ew.object().shape({text:ew.string().required(i({defaultMessage:"Please enter some text for the button",id:"ONn/MJ",description:"Validation message when button text is missing"})),href:ew.string().required(i({defaultMessage:"Please enter a URL for the button.",id:"sqzhoj",description:"Validation message when URL is missing"})).test("is-valid-url",i({defaultMessage:"Please enter a valid URL.",id:"3aikvR",description:"Validation message when URL is invalid"}),e=>!!(0,eA.validNormalizedUrl)(e||""))}),[i]);return(0,T.jsx)(ej.LuxModalContainer,{onHide:r,title:i({defaultMessage:"Add Button",id:"KsAWwT",description:"Modal title"}),children:n&&(0,T.jsx)(eT.Formik,{initialValues:{href:"",text:""},validationSchema:o,onSubmit:e=>{let{href:n,text:i}=e,o=null==t?void 0:t.view.state.selection.to;null==t||t.chain().focus().setButton({href:n,text:i,client_id:"button-".concat(ep(15))}).run(),null==t||t.commands.focus(o),r()},children:(0,T.jsxs)(eT.Form,{children:[(0,T.jsx)(eS.LuxInputField,{name:"text",label:i({defaultMessage:"Button Text",id:"MZNd24",description:"Label for button text field"}),autoFocus:!0,className:"mb-3"}),(0,T.jsx)(eS.LuxInputField,{name:"href",label:i({defaultMessage:"URL",id:"ek8dwK",description:"Label for URL field"}),className:"mb-3"}),(0,T.jsx)(eM.LuxSubmitButton,{label:i({defaultMessage:"Add Button",id:"/qgY1N",description:"Submit button label"})})]})})})};e.i(350461);var eC=e.i(221168);e.i(193683);var eE=e.i(308822),eB=e.i(398050),eO=e.i(374426),eD=e.i(767193),eR=e.i(426426),eP=e.i(193354),e_=e.i(56989),eH=e.i(109001),eI=e.i(900511);let eN=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,eF=ea.Node.create({name:H.SparkTypes.Block.Image,group:"block",draggable:!0,selectable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null},resize_width:{default:null},mime_type:{default:null},is_uploading:{default:!1},uploaded_at:{default:null},image_id:{default:null}}),addCommands(){return{insertBase64Image:e=>t=>{let{editor:n,chain:r}=t,{base64:i}=e,o=eK(i);if(!o)return!1;let a=URL.createObjectURL(o),l="local-upload-"+a,s=r().insertContent({type:this.name,attrs:{src:a,image_id:l,is_uploading:!0,uploaded_at:eB.DateTime.now().toISO()}}).run();return s&&n.view&&setTimeout(()=>{eq({view:n.view,image_id:l,image:{type:"local",file:o},uploadImage:this.options.uploadImage})},0),s}}},parseHTML:()=>[{tag:"img[src]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t)]},addInputRules(){return[(0,ea.nodeInputRule)({find:eN,type:this.type,getAttributes:e=>{let[,t,n,r]=e;return{src:n,alt:t,title:r}}})]},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,selected:n,updateAttributes:r}=e;return(0,T.jsx)(ez,{attrs:t.attrs,selected:n,updateAttributes:r})}),addProseMirrorPlugins(){return[eU({uploadImage:this.options.uploadImage}),new el.Plugin({props:{handleKeyDown:(e,t)=>ef({nodeName:H.SparkTypes.Block.Image,view:e,event:t})}})]}}),ez=e=>{var t;let{attrs:n,selected:r,updateAttributes:i}=e,o=(0,R.useT)(),{is_uploading:a,width:l,height:s,resize_width:c,uploaded_at:u}=n,d=(0,eR.useNow)({interval:{seconds:10}}),p=(0,S.useMemo)(()=>{if(!a||!u)return!1;let e=eB.DateTime.fromISO(u);return d.diff(e).as("seconds")>30},[a,u,d]),[f,h]=(0,S.useState)(n.src);(0,S.useEffect)(()=>{let e=n.src;e===f||(async()=>{await Promise.race([(0,eI.sleep)({seconds:10}),new Promise(t=>{let n=document.createElement("img");n.onload=()=>t(),n.src=e,n.complete&&t()})]),h(e)})()},[n.src,f]);let[m,g]=(0,eD.useMeasure)(),b=(0,S.useRef)(null),[v,y]=(0,S.useState)(null),k=(0,S.useCallback)(e=>{var t;if(!e)return;let n=Math.max((null!=(t=b.current)?t:g.width)+e,200);b.current=n,y(n)},[y,g]),x=(0,S.useRef)(!1),w=(0,S.useRef)(0),j=(e,t)=>{x.current=!0,w.current="touches"in e?e.touches[0].clientX:e.clientX;let n=e=>{if(!x.current)return;let n=(e.clientX-w.current)*2;w.current=e.clientX,"left"===t?k(-n):"right"===t&&k(n)},r=()=>{x.current=!1,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),b.current&&i({resize_width:b.current})};document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)},M=e_.CDN_URLS.some(e=>f.startsWith(e));return(0,T.jsxs)(C.NodeViewWrapper,{"data-drag-handle":!0,className:"image-node-view-wrapper",children:[(0,T.jsxs)("div",{style:{maxWidth:null!=(t=null!=v?v:c)?t:void 0,aspectRatio:l&&s?"".concat(l," / ").concat(s):void 0},className:"jsx-ad3b9a2c64fadbb5 "+((0,E.default)("image-wrapper selectable rounded overflow-hidden",{selected:r})||""),children:[(0,T.jsx)("div",{className:"jsx-ad3b9a2c64fadbb5 "+((0,E.default)("overlay",{uploading:a})||""),children:p?(0,T.jsxs)("div",{className:"jsx-ad3b9a2c64fadbb5 flex-column gap-2 text-error flex-center-center",children:[(0,T.jsx)(eP.default,{className:"svg-xl"}),(0,T.jsx)(D.T,{defaultMessage:"Upload Failed",id:"99o3cn",description:"Label shown when an image upload failed."})]}):a?(0,T.jsx)(eO.Spinner,{}):null}),(0,T.jsx)("img",{ref:m,src:M?(0,e_.getImageUrl)({url:f,width:Number(n.width||1e3),noTransparency:!1,allowAnimation:!0}):f,alt:o({defaultMessage:"User Uploaded Image",id:"wtXb+a",description:"Image alt text"}),className:"jsx-ad3b9a2c64fadbb5 image"}),(0,T.jsx)("div",{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),j(e,"left")},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),j(e,"left")},className:"jsx-ad3b9a2c64fadbb5 resize-control animated left"}),(0,T.jsx)("div",{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),j(e,"right")},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),j(e,"right")},className:"jsx-ad3b9a2c64fadbb5 resize-control animated right"})]}),(0,T.jsx)(A.default,{id:"fc0162ddd6e28f23",children:".image-node-view-wrapper{display:flex;margin-bottom:1rem!important}.image-node-view-wrapper:hover .resize-control{opacity:.9!important}"}),(0,T.jsx)(A.default,{id:"60a862e640cdf1f1",children:'.image-wrapper.jsx-ad3b9a2c64fadbb5{justify-content:center;margin-left:auto;margin-right:auto;display:flex;position:relative}.image-wrapper.jsx-ad3b9a2c64fadbb5 img.jsx-ad3b9a2c64fadbb5{max-height:unset;margin:0}.overlay.jsx-ad3b9a2c64fadbb5{pointer-events:none;z-index:1;background:0 0;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.overlay.uploading.jsx-ad3b9a2c64fadbb5{background:var(--bg-opacity-80)}.resize-control.jsx-ad3b9a2c64fadbb5{opacity:0;background-color:var(--secondary-bg-color);border:.5px solid var(--quaternary-color-alpha);-webkit-backdrop-filter:saturate(1.8)blur(20px);backdrop-filter:saturate(1.8)blur(20px);width:.25rem;height:50%;max-height:4rem;box-shadow:var(--shadow);cursor:col-resize;border-radius:.25rem;position:absolute;top:50%;transform:translateY(-50%)}.resize-control.jsx-ad3b9a2c64fadbb5:before{content:"";position:absolute;top:0;bottom:0;left:-.25rem;right:-.375rem}.resize-control.right.jsx-ad3b9a2c64fadbb5{right:.25rem}.resize-control.left.jsx-ad3b9a2c64fadbb5{left:.25rem}'})]})},eV=new el.PluginKey("imagePlugin"),eU=e=>{let{uploadImage:t}=e,n=new el.Plugin({key:eV,props:{decorations:e=>n.getState(e),handlePaste:(e,n)=>{var r;let i=Array.from((null==(r=n.clipboardData)?void 0:r.items)||[]);if(0===i.length||!i.every(e=>e.type.startsWith("image/")))return!1;for(let n of i.slice(0,5).reverse()){let r=n.getAsFile();r&&e$({view:e,file:r,uploadImage:t})}return!0},transformPasted:(e,n)=>{let r=[];return e.content.forEach(e=>{let i=e.attrs.src;if("image"===e.type.name&&i){if(e_.CDN_URLS.some(e=>i.startsWith(e)))return void r.push(e);if(i.startsWith("data:")){let[e,o]=i.slice(5).split(";"),a=e.split("/")[1]||"png",[l,s]=o.split(","),c=new File([new Blob([eC.Buffer.from(s,"base64")])],"image/".concat(a),{type:e});if("base64"===l){let e=URL.createObjectURL(c),i="local-upload-"+e,o=n.state.schema.nodes.image.create({image_id:i,src:e,is_uploading:!0,uploaded_at:eB.DateTime.now().toISO()});r.push(o),setTimeout(()=>eq({view:n,image_id:i,image:{type:"local",file:c},uploadImage:t}),1);return}}if(i.startsWith("http")){let e=i+"-"+ep(10),o=n.state.schema.nodes.image.create({image_id:e,src:i,is_uploading:!0,uploaded_at:eB.DateTime.now().toISO()});r.push(o),setTimeout(()=>eq({view:n,image_id:e,image:{type:"external",src:i},uploadImage:t}),1);return}}r.push(e)}),new eE.Slice(eE.Fragment.fromArray(r),e.openStart,e.openEnd)},handleDrop:(e,n)=>{var r;if(!(null==(r=n.dataTransfer)?void 0:r.files.length))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});if(!i)return!1;let o=Array.from(n.dataTransfer.files).filter(e=>H.SparkTypes.Image.Types.includes(e.type)).slice(0,5).reverse();for(let n of o)e$({view:e,file:n,dropPosition:i.pos,uploadImage:t});return o.length>0}}});return n},eW=e=>{let{view:t,image_id:n}=e,r=null;return t.state.doc.descendants((e,t)=>!e.attrs||e.attrs.image_id!==n||(r={node:e,pos:t},!1)),r},eq=async e=>{let{view:t,image_id:n,image:r,mime_type:i,uploadImage:o}=e;try{let e,a,l,s=null!=i?i:null;if("external"===r.type){let t=await fetch("".concat("https://media.lu.ma","/images/upload-from-url"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_url:r.src})});if(!t.ok)throw await eH.FetchError.fromResponse(t);let n=await t.json();({cdn_url:e,mime_type:s,image_height:l,image_width:a}=n)}else{let t=await o(r.file);e=t.file_url,a=t.image_width,l=t.image_height}let c=eW({view:t,image_id:n});if(c){let{pos:n,node:r}=c,i={...r.attrs,mime_type:s,src:e,is_uploading:!1,width:a,height:l};t.dispatch(t.state.tr.setNodeMarkup(n,null,i))}}catch(r){let e=eW({view:t,image_id:n});if(e){let{pos:n}=e;t.dispatch(t.state.tr.delete(n,n+1))}}},e$=async e=>{let{view:t,file:n,dropPosition:r,uploadImage:i}=e;if(!t.state.selection.$from.parent.inlineContent||!n)return;t.focus();let o=URL.createObjectURL(n),a="local-upload-"+o,l=t.state.schema.nodes.image.create({image_id:a,src:o,is_uploading:!0,uploaded_at:eB.DateTime.now().toISO()});t.dispatch(t.state.tr.insert(r||t.state.tr.selection.from,l));try{let{image_height:e,image_width:r,file_url:o}=await i(n),l=eW({view:t,image_id:a});if(l){let{pos:n,node:i}=l,a={...i.attrs,src:o,is_uploading:!1,width:r,height:e};t.dispatch(t.state.tr.setNodeMarkup(n,null,a))}}catch(n){let e=eW({view:t,image_id:a});if(e){let{pos:n}=e;t.dispatch(t.state.tr.delete(n,n+1))}}},eK=e=>{let[t,n]=e.split(","),r=t.match(/data:([^;]+)/),i=r?r[1]:"application/octet-stream",o=atob(n);return new Blob([new Uint8Array(Array(o.length).fill(0).map((e,t)=>o.charCodeAt(t)))],{type:i})},eY=S.default.forwardRef((e,t)=>{let{editor:n,uploadImage:r}=e,i=async e=>{if(e&&e.length)for(let t of e)e$({view:n.view,file:t,uploadImage:r});else(0,eo.toastError)("We don't recognize that file. Only JPG, PNG and GIF images are supported.")};return(0,T.jsx)("input",{ref:t,onChange:e=>{e.target.files&&i(e.target.files),e.target.value=""},multiple:!1,accept:H.SparkTypes.Image.Types.join(","),type:"file",autoComplete:"off",tabIndex:-1,style:{display:"none"}})}),eZ=new el.PluginKey("AddBlockMenu"),eG=e=>{let{state:t}=e,n=t.selection;if(!n)return!1;let r=(0,ea.findParentNode)(e=>e.type.name===H.SparkTypes.Block.Paragraph)(n),i=r&&(0===r.node.content.size||null==r.node.content),o=n.$from.depth;if(i&&1===o)return!0;if(0===o){let e=n.node;if((null==e?void 0:e.type.name)===H.SparkTypes.Block.Paragraph)return!0;let r=t.doc.nodeAt(n.$anchor.pos);if((null==r?void 0:r.type.name)===H.SparkTypes.Block.Paragraph)return!0}return!1},eX=e=>{let{editor:t,open:n,setOpen:r,uploadAttachment:i,userApiId:o,uploadImage:a}=e,l=(0,S.useRef)(null);(0,S.useEffect)(()=>(null==t||t.registerPlugin((e=>{let{element:t}=e;return new el.Plugin({key:eZ,props:{decorations:e=>{let n=e.selection.$from.start(1),r=eG({state:e});return t.style.visibility=r?"visible":"hidden",es.DecorationSet.create(e.doc,[es.Decoration.widget(n-1,()=>t)])}}})})({element:l.current})),()=>{null==t||t.unregisterPlugin(eZ)}),[t]);let s=(0,S.useMemo)(()=>null==t?void 0:t.extensionManager.extensions,[null==t?void 0:t.extensionManager.extensions]),c=(0,S.useMemo)(()=>{let e=s.find(e=>e.name===H.SparkTypes.Block.Heading);return!!(null==e?void 0:e.options.enabled)},[s]),u=(0,S.useMemo)(()=>{let e=s.find(e=>e.name===H.SparkTypes.Block.Button);return!!(null==e?void 0:e.options.enabled)},[s]),d=(0,N.useModalState)(),p=(0,S.useRef)(null),f=(0,S.useRef)(null),h=(0,S.useMemo)(()=>[{key:"heading",name:"Heading",icon:(0,T.jsx)(G,{}),onClick:()=>{null==t||t.chain().focus().setHeading({level:1}).run()},show:c},{key:"subheading",name:"Subheading",icon:(0,T.jsx)(J,{}),onClick:()=>{null==t||t.chain().focus().setHeading({level:2}).run()},show:c},{key:"image",name:"Image",icon:(0,T.jsx)(ee,{}),onClick:()=>{var e;null==(e=f.current)||e.click()}},{key:"blockquote",name:"Blockquote",icon:(0,T.jsx)(V,{}),onClick:()=>{null==t||t.chain().focus().setBlockquote().run()}},{key:"divider",name:"Divider",icon:(0,T.jsx)($,{}),onClick:()=>{null==t||t.chain().focus().setHorizontalRule().run()}},{key:"list",name:"List",icon:(0,T.jsx)(ei,{}),onClick:()=>{null==t||t.chain().focus().toggleBulletList().run()}},{key:"numbered-list",name:"Numbered List",icon:(0,T.jsx)(en,{}),onClick:()=>{null==t||t.chain().focus().toggleOrderedList().run()}},{key:"attachment",name:"Attachment",icon:(0,T.jsx)(Y,{}),onClick:()=>{var e;null==(e=p.current)||e.click()}},{key:"button",name:"Button",icon:(0,T.jsx)(W,{}),onClick:()=>{d.onShow()},show:u}].filter(e=>!1!==e.show),[t,c,d.onShow]),m=eG({state:t.state});return(0,T.jsxs)("div",{ref:l,className:"jsx-8918b9ac63d48525 "+((0,E.default)("add-block-menu flex-center-center",{shown:m})||""),children:[(0,T.jsx)(I.LuxMenu,{searchable:!0,trigger:(0,T.jsx)("div",{className:"jsx-8918b9ac63d48525 trigger flex-center-center",children:(0,T.jsx)(F.Plus16Icon,{})}),placement:"bottom-start",open:n,setOpen:r,showArrow:!1,rows:h}),(0,T.jsx)(eY,{ref:f,editor:t,uploadImage:a}),(0,T.jsx)(ex,{ref:p,editor:t,userApiId:o,uploadAttachment:i}),(0,T.jsx)(eL,{editor:t,...d}),(0,T.jsx)(A.default,{id:"8918b9ac63d48525",children:".add-block-menu.jsx-8918b9ac63d48525{opacity:0;pointer-events:none;transition:opacity var(--transition-duration)var(--transition-fn);width:1.5rem;height:1.5rem;color:var(--secondary-color);margin-left:-1.5rem;display:inline-flex;position:absolute}.add-block-menu.jsx-8918b9ac63d48525:hover,.add-block-menu.jsx-8918b9ac63d48525:focus{cursor:pointer;color:var(--primary-color)}.add-block-menu.jsx-8918b9ac63d48525 .trigger.jsx-8918b9ac63d48525{transition:var(--transition);box-shadow:var(--shadow-sm);background-color:var(--secondary-button-bg-color);border-radius:var(--small-border-radius);color:var(--secondary-button-color);padding:.125rem}.add-block-menu.jsx-8918b9ac63d48525 .trigger.jsx-8918b9ac63d48525:hover{color:var(--primary-button-color);background-color:var(--primary-button-hover-bg-color)}.ProseMirror-focused .add-block-menu.shown,.editable-container.add-block-menu-open .add-block-menu,.add-block-menu.shown:active,.add-block-menu.shown:focus,.add-block-menu.shown:hover{opacity:1;pointer-events:initial}"})]})};var eJ=e.i(154258),eQ=e.i(388773),e0=eQ.Dropcursor,e1=eQ.Gapcursor,e2=eQ.UndoRedo;let e3=/^\s*>\s$/gm,e8=ea.Node.create({name:H.SparkTypes.Block.Blockquote,addOptions:()=>({HTMLAttributes:{}}),content:"(paragraph)*",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML(e){let{HTMLAttributes:t}=e;return["blockquote",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setBlockquote:()=>e=>{let{commands:t}=e;return t.wrapIn(H.SparkTypes.Block.Blockquote)},toggleBlockquote:()=>e=>{let{commands:t}=e;return t.toggleWrap(H.SparkTypes.Block.Blockquote)},unsetBlockquote:()=>e=>{let{commands:t}=e;return t.lift(H.SparkTypes.Block.Blockquote)}}),addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,ea.wrappingInputRule)({find:e3,type:this.type})]}}),e6=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,e5=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,e4=ea.Mark.create({name:H.SparkTypes.Mark.Bold,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML(e){let{HTMLAttributes:t}=e;return["strong",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setBold:()=>e=>{let{commands:t}=e;return t.setMark(H.SparkTypes.Mark.Bold)},toggleBold:()=>e=>{let{commands:t}=e;return t.toggleMark(H.SparkTypes.Mark.Bold)},unsetBold:()=>e=>{let{commands:t}=e;return t.unsetMark(H.SparkTypes.Mark.Bold)}}),addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,ea.markInputRule)({find:e6,type:this.type})]},addPasteRules(){return[(0,ea.markPasteRule)({find:e5,type:this.type})]}}),e9=/^\s*([-+*])\s$/,e7=ea.Node.create({name:H.SparkTypes.Block.BulletList,addOptions:()=>({HTMLAttributes:{}}),group:"block list",content:"".concat(H.SparkTypes.Block.ListItem,"+"),parseHTML:()=>[{tag:"ul"}],renderHTML(e){let{HTMLAttributes:t}=e;return["ul",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleBulletList:()=>e=>{let{commands:t}=e;return t.toggleList(H.SparkTypes.Block.BulletList,H.SparkTypes.Block.ListItem)}}),addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[(0,ea.wrappingInputRule)({find:e9,type:this.type})]}});var te=e.i(424017);let tt=H.SparkTypes.Block.Button+"View",tn=ea.Node.create({name:H.SparkTypes.Block.Button,group:"block",atom:!0,draggable:!0,selectable:!0,addAttributes:()=>({href:{default:"https://luma.com"},client_id:{default:""},text:{default:"Luma"}}),parseHTML(){return this.options.enabled?[{tag:tt}]:[]},renderHTML(e){let{HTMLAttributes:t}=e;return[tt,(0,ea.mergeAttributes)(t)]},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,selected:n}=e;return(0,T.jsx)(tr,{attrs:t.attrs,selected:n})}),addProseMirrorPlugins(){return this.options.enabled?[new el.Plugin({props:{handleKeyDown:(e,t)=>ef({nodeName:H.SparkTypes.Block.Button,view:e,event:t})}})]:[]},addCommands(){return this.options.enabled?{setButton:e=>t=>{let{commands:n}=t;return n.insertContent({type:this.name,attrs:e})}}:{}}}),tr=e=>{let{attrs:t,selected:n}=e;return(0,T.jsxs)(C.NodeViewWrapper,{className:"button-view-component",children:[(0,T.jsx)("div",{"data-drag-handle":!0,className:"jsx-1cbc7add7fb7d1ec "+((0,E.default)("button-wrapper selectable ",{selected:n})||""),children:(0,T.jsx)(te.LuxButton,{label:t.text||"Button",href:t.href,color:"brand"})}),(0,T.jsx)(A.default,{id:"1cbc7add7fb7d1ec",children:".button-wrapper.jsx-1cbc7add7fb7d1ec{justify-content:center;margin-bottom:1rem;padding:.5rem 0;display:flex}.button-wrapper.selected.jsx-1cbc7add7fb7d1ec,.button-wrapper.within-selection.jsx-1cbc7add7fb7d1ec{outline:2px solid var(--editor-selected-node-border-color)}"})]})},ti=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/gm,to=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/gm,ta=ea.Mark.create({name:H.SparkTypes.Mark.Code,addOptions:()=>({HTMLAttributes:{}}),excludes:"_",parseHTML:()=>[{tag:"code"}],renderHTML(e){let{HTMLAttributes:t}=e;return["code",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setCode:()=>e=>{let{commands:t}=e;return t.setMark(H.SparkTypes.Mark.Code)},toggleCode:()=>e=>{let{commands:t}=e;return t.toggleMark(H.SparkTypes.Mark.Code)},unsetCode:()=>e=>{let{commands:t}=e;return t.unsetMark(H.SparkTypes.Mark.Code)}}),addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,ea.markInputRule)({find:ti,type:this.type})]},addPasteRules(){return[(0,ea.markPasteRule)({find:to,type:this.type})]}}),tl=RegExp("^```(?<language>[a-z]*)? $"),ts=ea.Node.create({name:H.SparkTypes.Block.CodeBlock,addOptions:()=>({languageClassPrefix:"language-",HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;let n=null==(t=e.firstElementChild)?void 0:t.getAttribute("class");if(!n)return null;let r=new RegExp("^(".concat(this.options.languageClassPrefix,")"));return{language:n.replace(r,"")}},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{HTMLAttributes:t}=e;return["pre",this.options.HTMLAttributes,["code",t,0]]},addCommands:()=>({setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(H.SparkTypes.Block.CodeBlock,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(H.SparkTypes.Block.CodeBlock,H.SparkTypes.Block.Paragraph,e)}}),addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!n||!t.parent.textContent.length)&&this.editor.commands.clearNodes()}}},addInputRules(){return[(0,ea.textblockTypeInputRule)({find:tl,type:this.type,getAttributes:e=>{let{groups:t}=e;return t}})]}}),tc=ea.Extension.create({name:"email_subject",addProseMirrorPlugins:()=>[new el.Plugin({props:{handleKeyDown:(e,t)=>"Enter"===t.key,handlePaste:(e,t)=>{let{clipboardData:n}=t,r=null==n?void 0:n.getData("text");if(!r)return!1;let i=r.replace(/[\n\r]/g," ");return e.dispatch(e.state.tr.insertText(i)),!0}}})]}),tu=ea.Node.create({name:H.SparkTypes.Inline.HardBreak,addOptions:()=>({HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML(e){let{HTMLAttributes:t}=e;return["br",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t)]},addCommands(){return{setHardBreak:()=>e=>{let{commands:t}=e;return t.first([()=>t.exitCode(),()=>t.insertContent({type:this.name})])}}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),td=[1,2],tp=ea.Node.create({name:H.SparkTypes.Block.Heading,addOptions:()=>({enabled:!0,HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.enabled?td.map(e=>({tag:"h".concat(e),attrs:{level:e}})):[]},renderHTML(e){let{node:t,HTMLAttributes:n}=e,r=td.includes(t.attrs.level)?t.attrs.level:td[0];return["h".concat(r),(0,ea.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return this.options.enabled?{setHeading:e=>t=>{let{commands:n}=t;return e.level?!!td.includes(e.level)&&n.setNode(H.SparkTypes.Block.Heading,e):n.setNode(H.SparkTypes.Block.Paragraph,e)},toggleHeading:e=>t=>{let{commands:n}=t,r=(null==e?void 0:e.level)||1;return!!td.includes(r)&&n.toggleNode(H.SparkTypes.Block.Heading,H.SparkTypes.Block.Paragraph,e)}}:{}},addKeyboardShortcuts(){return this.options.enabled?Object.fromEntries([1,2].map(e=>["Mod-Alt-".concat(e),()=>this.editor.commands.toggleHeading({level:e})])):{}},addInputRules(){return this.options.enabled?td.map(e=>(0,ea.textblockTypeInputRule)({find:new RegExp("^(#{1,".concat(e,"})\\s$")),type:this.type,getAttributes:{level:e}})):[]}}),tf=ea.Node.create({name:H.SparkTypes.Block.HorizontalRule,addOptions:()=>({HTMLAttributes:{}}),group:"block",addCommands(){return{setHorizontalRule:()=>e=>{let{chain:t}=e;return t().command(e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,{empty:i,$anchor:o}=r,a=o.parent.isTextblock&&!o.parent.type.spec.code&&!o.parent.textContent;if(!i||!a||!n)return!0;let l=o.before(),s=o.start();return t.deleteRange(l,s),t.setSelection(el.TextSelection.create(t.doc,l)),!0}).insertContent({type:this.name}).command(e=>{let{tr:t,dispatch:n}=e;if(n){let{pos:e}=t.selection.$from,n=e+1;t.doc.nodeAt(n)||t.setSelection(el.TextSelection.create(t.doc,n)),t.scrollIntoView()}return!0}).run()}}},parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t)]},addInputRules(){var e;return[(e={find:/^(?:---\s)$/,type:this.type},new ea.InputRule({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,{tr:o}=n,a=r.from,l=r.to;if(i[0]){o.replaceWith(a-1,l,e.type.create({}));let{parent:t,pos:n}=o.selection.$from,r=n+1;if(!o.doc.nodeAt(r)){var s;let e=null==(s=t.type.contentMatch.defaultType)?void 0:s.create();e&&(o.insert(r,e),o.setSelection(el.TextSelection.create(o.doc,r)))}}}}))]}}),th=/(?:^|\s)((?:\/)((?:[^_]+))(?:\/))$/gm,tm=/(?:^|\s)((?:\/)((?:[^_]+))(?:\/))/gm,tg=ea.Mark.create({name:H.SparkTypes.Mark.Italic,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML(e){let{HTMLAttributes:t}=e;return["em",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setItalic:()=>e=>{let{commands:t}=e;return t.setMark(H.SparkTypes.Mark.Italic)},toggleItalic:()=>e=>{let{commands:t}=e;return t.toggleMark(H.SparkTypes.Mark.Italic)},unsetItalic:()=>e=>{let{commands:t}=e;return t.unsetMark(H.SparkTypes.Mark.Italic)}}),addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,ea.markInputRule)({find:th,type:this.type})]},addPasteRules(){return[(0,ea.markPasteRule)({find:tm,type:this.type})]}}),tb=ea.Node.create({name:H.SparkTypes.Block.ListItem,addOptions:()=>({HTMLAttributes:{}}),addCommands:()=>({indent:()=>e=>{let{commands:t,editor:n}=e;return!!n.isActive(H.SparkTypes.Block.ListItem)&&t.sinkListItem(H.SparkTypes.Block.ListItem)},dedent:()=>e=>{let{commands:t,editor:n}=e;return!!n.isActive(H.SparkTypes.Block.ListItem)&&t.liftListItem(H.SparkTypes.Block.ListItem)}}),content:"paragraph list*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(H.SparkTypes.Block.ListItem),Tab:()=>this.editor.commands.sinkListItem(H.SparkTypes.Block.ListItem),"Shift-Tab":()=>this.editor.commands.liftListItem(H.SparkTypes.Block.ListItem)}}}),tv=ea.Extension.create({name:"onKeyDownExtension",addKeyboardShortcuts(){let e=this.options.onCmdEnter;return{"Mod-Enter":()=>{var t;return null!=(t=null==e?void 0:e())&&t}}}}),ty=/^(\d+)\.\s$/,tk=ea.Node.create({name:H.SparkTypes.Block.OrderedList,addOptions:()=>({HTMLAttributes:{}}),group:"block list",content:"".concat(H.SparkTypes.Block.ListItem,"+"),addAttributes:()=>({start:{default:1,parseHTML:e=>({start:e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1})}}),parseHTML:()=>[{tag:"ol"}],renderHTML(e){let{HTMLAttributes:t}=e,{start:n,...r}=t;return 1===n?["ol",(0,ea.mergeAttributes)(this.options.HTMLAttributes,r),0]:["ol",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleOrderedList:()=>e=>{let{commands:t}=e;return t.toggleList(H.SparkTypes.Block.OrderedList,H.SparkTypes.Block.ListItem)}}),addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[(0,ea.wrappingInputRule)({find:ty,type:this.type,getAttributes:e=>({order:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}});var tx=e.i(786397);let tw=ea.Extension.create({name:"placeholder",addOptions:()=>({placeholder:null}),addProseMirrorPlugins(){return[new el.Plugin({props:{decorations:e=>{let{doc:t,selection:n}=e,r=this.editor.isEditable,{anchor:i}=n;if(!r||!this.options.placeholder)return es.DecorationSet.empty;let o=[];return t.descendants((e,t)=>{let n=i>=t&&i<=t+e.nodeSize,r=!e.isLeaf&&!e.childCount;if(n&&r){let n=["is-empty"];this.editor.isEmpty&&n.push("is-editor-empty");let r=es.Decoration.node(t,t+e.nodeSize,{class:n.join(" "),"data-placeholder":this.options.placeholder||void 0});o.push(r)}return!1}),es.DecorationSet.create(t,o)}}})]}});var tT=e.i(893502),tS=e.i(235979);let tj=["lu.ma","luma.com"].map(e=>e.replace(/\./g,"\\.")).join("|"),tM=RegExp("^(?:https?://(?:".concat(tj,")/)([a-zA-Z0-9-_.]+)"),"i"),tA=ea.Node.create({name:H.SparkTypes.Block.Event,group:"block",draggable:!0,addAttributes:()=>({event:{default:null}}),parseHTML:()=>[{tag:H.SparkTypes.Block.Event}],renderHTML(e){let{HTMLAttributes:t}=e;return[H.SparkTypes.Block.Event,(0,ea.mergeAttributes)(t)]},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,selected:n}=e;return(0,T.jsx)(tL,{attrs:t.attrs,selected:n})}),addProseMirrorPlugins(){return[new el.Plugin({props:{handlePaste:(e,t)=>{if(!em(e.state))return!1;let{clipboardData:n}=t,r=null==n?void 0:n.getData("text");if(!r)return!1;let i=r.match(tM);if(null==i)return!1;let o=i[0],a=i[1];return this.options.lookupSlug(a).then(t=>{let{kind:n,data:r}=t;if(n!==tT.UrlKind.Event){let t=e.state.selection.$anchor.pos,n=e.state.schema.marks.link,r=e.state.schema.text(o,[n.create({href:o})]);e.dispatch(e.state.tr.replaceWith(t,t,r));return}let{event:i}=r,{api_id:l,cover_url:s,location_type:c,name:u,start_at:d,timezone:p}=i,f=e.state.selection.$anchor.pos;e.dispatch(e.state.tr.replaceWith(f,f,this.type.create({url:o,event:{api_id:l,cover_url:s,location_type:c,name:u,start_at:d,timezone:p,url:a}})))}),!0}}}),new el.Plugin({props:{handleKeyDown:(e,t)=>ef({nodeName:H.SparkTypes.Block.Event,view:e,event:t})}})]}}),tL=e=>{let{attrs:t,selected:n}=e;return(0,T.jsxs)(C.NodeViewWrapper,{"data-drag-handle":!0,children:[(0,T.jsx)("div",{className:"jsx-f2d3af4f3c66dc64 "+((0,E.default)("editor-wrapper rounded-border selectable",{selected:n})||""),children:(0,T.jsx)(tS.SparkEventView,{attrs:t,editor:!0})}),(0,T.jsx)(A.default,{id:"f2d3af4f3c66dc64",children:".editor-wrapper.jsx-f2d3af4f3c66dc64{margin-bottom:1rem;overflow:hidden}.selected.jsx-f2d3af4f3c66dc64,.within-selection.jsx-f2d3af4f3c66dc64{border:1px solid var(--editor-selected-node-border-color);box-shadow:0 0 0 1px var(--editor-selected-node-border-color)}"})]})};var tC=e.i(46207);function tE(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function tB(e){var t=tE(e).Element;return e instanceof t||e instanceof Element}function tO(e){var t=tE(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function tD(e){if("undefined"==typeof ShadowRoot)return!1;var t=tE(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var tR=Math.max,tP=Math.min,t_=Math.round;function tH(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function tI(){return!/^((?!chrome|android).)*safari/i.test(tH())}function tN(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&tO(e)&&(i=e.offsetWidth>0&&t_(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&t_(r.height)/e.offsetHeight||1);var a=(tB(e)?tE(e):window).visualViewport,l=!tI()&&n,s=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:s+u,bottom:c+d,left:s,x:s,y:c}}function tF(e){var t=tE(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function tz(e){return e?(e.nodeName||"").toLowerCase():null}function tV(e){return((tB(e)?e.ownerDocument:e.document)||window.document).documentElement}function tU(e){return tN(tV(e)).left+tF(e).scrollLeft}function tW(e){return tE(e).getComputedStyle(e)}function tq(e){var t=tW(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function t$(e){var t=tN(e),n=e.offsetWidth,r=e.offsetHeight;return 1>=Math.abs(t.width-n)&&(n=t.width),1>=Math.abs(t.height-r)&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function tK(e){return"html"===tz(e)?e:e.assignedSlot||e.parentNode||(tD(e)?e.host:null)||tV(e)}function tY(e,t){void 0===t&&(t=[]);var n,r=function e(t){return["html","body","#document"].indexOf(tz(t))>=0?t.ownerDocument.body:tO(t)&&tq(t)?t:e(tK(t))}(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=tE(r),a=i?[o].concat(o.visualViewport||[],tq(r)?r:[]):r,l=t.concat(a);return i?l:l.concat(tY(tK(a)))}function tZ(e){return tO(e)&&"fixed"!==tW(e).position?e.offsetParent:null}function tG(e){for(var t=tE(e),n=tZ(e);n&&["table","td","th"].indexOf(tz(n))>=0&&"static"===tW(n).position;)n=tZ(n);return n&&("html"===tz(n)||"body"===tz(n)&&"static"===tW(n).position)?t:n||function(e){var t=/firefox/i.test(tH());if(/Trident/i.test(tH())&&tO(e)&&"fixed"===tW(e).position)return null;var n=tK(e);for(tD(n)&&(n=n.host);tO(n)&&0>["html","body"].indexOf(tz(n));){var r=tW(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var tX="bottom",tJ="right",tQ="left",t0="auto",t1=["top",tX,tJ,tQ],t2="start",t3="viewport",t8="popper",t6=t1.reduce(function(e,t){return e.concat([t+"-"+t2,t+"-end"])},[]),t5=[].concat(t1,[t0]).reduce(function(e,t){return e.concat([t,t+"-"+t2,t+"-end"])},[]),t4=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function t9(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&tD(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function t7(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ne(e,t,n){var r,i,o,a,l,s,c,u,d,p;return t===t3?t7(function(e,t){var n=tE(e),r=tV(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,l=0,s=0;if(i){o=i.width,a=i.height;var c=tI();(c||!c&&"fixed"===t)&&(l=i.offsetLeft,s=i.offsetTop)}return{width:o,height:a,x:l+tU(e),y:s}}(e,n)):tB(t)?((r=tN(t,!1,"fixed"===n)).top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r):t7((i=tV(e),a=tV(i),l=tF(i),s=null==(o=i.ownerDocument)?void 0:o.body,c=tR(a.scrollWidth,a.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),u=tR(a.scrollHeight,a.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),d=-l.scrollLeft+tU(i),p=-l.scrollTop,"rtl"===tW(s||a).direction&&(d+=tR(a.clientWidth,s?s.clientWidth:0)-c),{width:c,height:u,x:d,y:p}))}function nt(e){return e.split("-")[0]}function nn(e){return e.split("-")[1]}function nr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ni(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?nt(i):null,a=i?nn(i):null,l=n.x+n.width/2-r.width/2,s=n.y+n.height/2-r.height/2;switch(o){case"top":t={x:l,y:n.y-r.height};break;case tX:t={x:l,y:n.y+n.height};break;case tJ:t={x:n.x+n.width,y:s};break;case tQ:t={x:n.x-r.width,y:s};break;default:t={x:n.x,y:n.y}}var c=o?nr(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case t2:t[c]=t[c]-(n[u]/2-r[u]/2);break;case"end":t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function no(){return{top:0,right:0,bottom:0,left:0}}function na(e){return Object.assign({},no(),e)}function nl(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function ns(e,t){void 0===t&&(t={});var n,r,i,o,a,l,s,c,u=t,d=u.placement,p=void 0===d?e.placement:d,f=u.strategy,h=void 0===f?e.strategy:f,m=u.boundary,g=u.rootBoundary,b=u.elementContext,v=void 0===b?t8:b,y=u.altBoundary,k=u.padding,x=void 0===k?0:k,w=na("number"!=typeof x?x:nl(x,t1)),T=e.rects.popper,S=e.elements[void 0!==y&&y?v===t8?"reference":t8:v],j=(n=tB(S)?S:S.contextElement||tV(e.elements.popper),r=void 0===m?"clippingParents":m,i=void 0===g?t3:g,s=(l=[].concat("clippingParents"===r?(o=tY(tK(n)),!tB(a=["absolute","fixed"].indexOf(tW(n).position)>=0&&tO(n)?tG(n):n)?[]:o.filter(function(e){return tB(e)&&t9(e,a)&&"body"!==tz(e)})):[].concat(r),[i]))[0],(c=l.reduce(function(e,t){var r=ne(n,t,h);return e.top=tR(r.top,e.top),e.right=tP(r.right,e.right),e.bottom=tP(r.bottom,e.bottom),e.left=tR(r.left,e.left),e},ne(n,s,h))).width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c),M=tN(e.elements.reference),A=ni({reference:M,element:T,strategy:"absolute",placement:p}),L=t7(Object.assign({},T,A)),C=v===t8?L:M,E={top:j.top-C.top+w.top,bottom:C.bottom-j.bottom+w.bottom,left:j.left-C.left+w.left,right:C.right-j.right+w.right},B=e.modifiersData.offset;if(v===t8&&B){var O=B[p];Object.keys(E).forEach(function(e){var t=[tJ,tX].indexOf(e)>=0?1:-1,n=["top",tX].indexOf(e)>=0?"y":"x";E[e]+=O[n]*t})}return E}var nc={placement:"bottom",modifiers:[],strategy:"absolute"};function nu(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var nd={passive:!0},np={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nf(e){var t,n,r,i,o,a,l,s=e.popper,c=e.popperRect,u=e.placement,d=e.variation,p=e.offsets,f=e.position,h=e.gpuAcceleration,m=e.adaptive,g=e.roundOffsets,b=e.isFixed,v=p.x,y=void 0===v?0:v,k=p.y,x=void 0===k?0:k,w="function"==typeof g?g({x:y,y:x}):{x:y,y:x};y=w.x,x=w.y;var T=p.hasOwnProperty("x"),S=p.hasOwnProperty("y"),j=tQ,M="top",A=window;if(m){var L=tG(s),C="clientHeight",E="clientWidth";L===tE(s)&&"static"!==tW(L=tV(s)).position&&"absolute"===f&&(C="scrollHeight",E="scrollWidth"),("top"===u||(u===tQ||u===tJ)&&"end"===d)&&(M=tX,x-=(b&&L===A&&A.visualViewport?A.visualViewport.height:L[C])-c.height,x*=h?1:-1),(u===tQ||("top"===u||u===tX)&&"end"===d)&&(j=tJ,y-=(b&&L===A&&A.visualViewport?A.visualViewport.width:L[E])-c.width,y*=h?1:-1)}var B=Object.assign({position:f},m&&np),O=!0===g?(t={x:y,y:x},n=tE(s),r=t.x,i=t.y,{x:t_(r*(o=n.devicePixelRatio||1))/o||0,y:t_(i*o)/o||0}):{x:y,y:x};return(y=O.x,x=O.y,h)?Object.assign({},B,((l={})[M]=S?"0":"",l[j]=T?"0":"",l.transform=1>=(A.devicePixelRatio||1)?"translate("+y+"px, "+x+"px)":"translate3d("+y+"px, "+x+"px, 0)",l)):Object.assign({},B,((a={})[M]=S?x+"px":"",a[j]=T?y+"px":"",a.transform="",a))}let nh={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];tO(i)&&tz(i)&&(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});tO(r)&&tz(r)&&(Object.assign(r.style,o),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};var nm={left:"right",right:"left",bottom:"top",top:"bottom"};function ng(e){return e.replace(/left|right|bottom|top/g,function(e){return nm[e]})}var nb={start:"end",end:"start"};function nv(e){return e.replace(/start|end/g,function(e){return nb[e]})}function ny(e,t,n){return tR(e,tP(t,n))}function nk(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function nx(e){return["top",tJ,tX,tQ].some(function(t){return e[t]>=0})}var nw=(r=void 0===(n=(t={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,l=void 0===a||a,s=tE(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(e){e.addEventListener("scroll",n.update,nd)}),l&&s.addEventListener("resize",n.update,nd),function(){o&&c.forEach(function(e){e.removeEventListener("scroll",n.update,nd)}),l&&s.removeEventListener("resize",n.update,nd)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ni({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=n.adaptive,o=n.roundOffsets,a=void 0===o||o,l={placement:nt(t.placement),variation:nn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===r||r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,nf(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===i||i,roundOffsets:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,nf(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},nh,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=t5.reduce(function(e,n){var r,i,a,l,s,c;return e[n]=(r=t.rects,a=[tQ,"top"].indexOf(i=nt(n))>=0?-1:1,s=(l="function"==typeof o?o(Object.assign({},r,{placement:n})):o)[0],c=l[1],s=s||0,c=(c||0)*a,[tQ,tJ].indexOf(i)>=0?{x:c,y:s}:{x:s,y:c}),e},{}),l=a[t.placement],s=l.x,c=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,l=void 0===a||a,s=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,h=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,b=nt(g)===g,v=s||(b||!h?[ng(g)]:function(e){if(nt(e)===t0)return[];var t=ng(e);return[nv(e),t,nv(t)]}(g)),y=[g].concat(v).reduce(function(e,n){var r,i,o,a,l,s,p,f,g,b,v,y;return e.concat(nt(n)===t0?(i=(r={placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:m}).placement,o=r.boundary,a=r.rootBoundary,l=r.padding,s=r.flipVariations,f=void 0===(p=r.allowedAutoPlacements)?t5:p,0===(v=(b=(g=nn(i))?s?t6:t6.filter(function(e){return nn(e)===g}):t1).filter(function(e){return f.indexOf(e)>=0})).length&&(v=b),Object.keys(y=v.reduce(function(e,n){return e[n]=ns(t,{placement:n,boundary:o,rootBoundary:a,padding:l})[nt(n)],e},{})).sort(function(e,t){return y[e]-y[t]})):n)},[]),k=t.rects.reference,x=t.rects.popper,w=new Map,T=!0,S=y[0],j=0;j<y.length;j++){var M=y[j],A=nt(M),L=nn(M)===t2,C=["top",tX].indexOf(A)>=0,E=C?"width":"height",B=ns(t,{placement:M,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),O=C?L?tJ:tQ:L?tX:"top";k[E]>x[E]&&(O=ng(O));var D=ng(O),R=[];if(o&&R.push(B[A]<=0),l&&R.push(B[O]<=0,B[D]<=0),R.every(function(e){return e})){S=M,T=!1;break}w.set(M,R)}if(T)for(var P=h?3:1,_=function(e){var t=y.find(function(t){var n=w.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},H=P;H>0&&"break"!==_(H);H--);t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=n.altAxis,a=n.boundary,l=n.rootBoundary,s=n.altBoundary,c=n.padding,u=n.tether,d=void 0===u||u,p=n.tetherOffset,f=void 0===p?0:p,h=ns(t,{boundary:a,rootBoundary:l,padding:c,altBoundary:s}),m=nt(t.placement),g=nn(t.placement),b=!g,v=nr(m),y="x"===v?"y":"x",k=t.modifiersData.popperOffsets,x=t.rects.reference,w=t.rects.popper,T="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,S="number"==typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),j=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(k){if(void 0===i||i){var A,L="y"===v?"top":tQ,C="y"===v?tX:tJ,E="y"===v?"height":"width",B=k[v],O=B+h[L],D=B-h[C],R=d?-w[E]/2:0,P=g===t2?x[E]:w[E],_=g===t2?-w[E]:-x[E],H=t.elements.arrow,I=d&&H?t$(H):{width:0,height:0},N=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:no(),F=N[L],z=N[C],V=ny(0,x[E],I[E]),U=b?x[E]/2-R-V-F-S.mainAxis:P-V-F-S.mainAxis,W=b?-x[E]/2+R+V+z+S.mainAxis:_+V+z+S.mainAxis,q=t.elements.arrow&&tG(t.elements.arrow),$=q?"y"===v?q.clientTop||0:q.clientLeft||0:0,K=null!=(A=null==j?void 0:j[v])?A:0,Y=ny(d?tP(O,B+U-K-$):O,B,d?tR(D,B+W-K):D);k[v]=Y,M[v]=Y-B}if(void 0!==o&&o){var Z,G,X="x"===v?"top":tQ,J="x"===v?tX:tJ,Q=k[y],ee="y"===y?"height":"width",et=Q+h[X],en=Q-h[J],er=-1!==["top",tQ].indexOf(m),ei=null!=(G=null==j?void 0:j[y])?G:0,eo=er?et:Q-x[ee]-w[ee]-ei+S.altAxis,ea=er?Q+x[ee]+w[ee]-ei-S.altAxis:en,el=d&&er?(Z=ny(eo,Q,ea))>ea?ea:Z:ny(d?eo:et,Q,d?ea:en);k[y]=el,M[y]=el-Q}t.modifiersData[r]=M}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,l=nt(n.placement),s=nr(l),c=[tQ,tJ].indexOf(l)>=0?"height":"width";if(o&&a){var u,d=(u=i.padding,na("number"!=typeof(u="function"==typeof u?u(Object.assign({},n.rects,{placement:n.placement})):u)?u:nl(u,t1))),p=t$(o),f="y"===s?"top":tQ,h="y"===s?tX:tJ,m=n.rects.reference[c]+n.rects.reference[s]-a[s]-n.rects.popper[c],g=a[s]-n.rects.reference[s],b=tG(o),v=b?"y"===s?b.clientHeight||0:b.clientWidth||0:0,y=d[f],k=v-p[c]-d[h],x=v/2-p[c]/2+(m/2-g/2),w=ny(y,x,k);n.modifiersData[r]=((t={})[s]=w,t.centerOffset=w-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null==r||("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&t9(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=ns(t,{elementContext:"reference"}),l=ns(t,{altBoundary:!0}),s=nk(a,r),c=nk(l,i,o),u=nx(s),d=nx(c);t.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}).defaultModifiers)?[]:n,o=void 0===(i=t.defaultOptions)?nc:i,function(e,t,n){void 0===n&&(n=o);var i,a,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},nc,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],c=!1,u={state:l,setOptions:function(n){var i,a,c,p,f,h,m="function"==typeof n?n(l.options):n;d(),l.options=Object.assign({},o,l.options,m),l.scrollParents={reference:tB(e)?tY(e):e.contextElement?tY(e.contextElement):[],popper:tY(t)};var g=(a=Object.keys(i=[].concat(r,l.options.modifiers).reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{})).map(function(e){return i[e]}),c=new Map,p=new Set,f=[],a.forEach(function(e){c.set(e.name,e)}),a.forEach(function(e){p.has(e.name)||function e(t){p.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!p.has(t)){var n=c.get(t);n&&e(n)}}),f.push(t)}(e)}),h=f,t4.reduce(function(e,t){return e.concat(h.filter(function(e){return e.phase===t}))},[]));return l.orderedModifiers=g.filter(function(e){return e.enabled}),l.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=e.effect;if("function"==typeof r){var i=r({state:l,name:t,instance:u,options:void 0===n?{}:n});s.push(i||function(){})}}),u.update()},forceUpdate:function(){if(!c){var e=l.elements,t=e.reference,n=e.popper;if(nu(t,n)){l.rects={reference:(r=tG(n),i="fixed"===l.options.strategy,o=tO(r),p=tO(r)&&(s=t_((a=r.getBoundingClientRect()).width)/r.offsetWidth||1,d=t_(a.height)/r.offsetHeight||1,1!==s||1!==d),f=tV(r),h=tN(t,p,i),m={scrollLeft:0,scrollTop:0},g={x:0,y:0},(o||!o&&!i)&&(("body"!==tz(r)||tq(f))&&(m=function(e){return e!==tE(e)&&tO(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:tF(e)}(r)),tO(r)?(g=tN(r,!0),g.x+=r.clientLeft,g.y+=r.clientTop):f&&(g.x=tU(f))),{x:h.left+m.scrollLeft-g.x,y:h.top+m.scrollTop-g.y,width:h.width,height:h.height}),popper:t$(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(e){return l.modifiersData[e.name]=Object.assign({},e.data)});for(var r,i,o,a,s,d,p,f,h,m,g,b=0;b<l.orderedModifiers.length;b++){if(!0===l.reset){l.reset=!1,b=-1;continue}var v=l.orderedModifiers[b],y=v.fn,k=v.options,x=void 0===k?{}:k,w=v.name;"function"==typeof y&&(l=y({state:l,options:x,name:w,instance:u})||l)}}}},update:(i=function(){return new Promise(function(e){u.forceUpdate(),e(l)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(i())})})),a}),destroy:function(){d(),c=!0}};if(!nu(e,t))return u;function d(){s.forEach(function(e){return e()}),s=[]}return u.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),u}),nT="tippy-content",nS="tippy-arrow",nj="tippy-svg-arrow",nM={passive:!0,capture:!0},nA=function(){return document.body};function nL(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function nC(e,t){var n=({}).toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function nE(e,t){return"function"==typeof e?e.apply(void 0,t):e}function nB(e,t){var n;return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function nO(e){return[].concat(e)}function nD(e,t){-1===e.indexOf(t)&&e.push(t)}function nR(e){return[].slice.call(e)}function nP(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function n_(){return document.createElement("div")}function nH(e){return["Element","Fragment"].some(function(t){return nC(e,t)})}function nI(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function nN(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function nF(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}function nz(e,t){for(var n,r=t;r;){if(e.contains(r))return!0;r=null==r.getRootNode||null==(n=r.getRootNode())?void 0:n.host}return!1}var nV={isTouch:!1},nU=0;function nW(){!nV.isTouch&&(nV.isTouch=!0,window.performance&&document.addEventListener("mousemove",nq))}function nq(){var e=performance.now();e-nU<20&&(nV.isTouch=!1,document.removeEventListener("mousemove",nq)),nU=e}function n$(){var e=document.activeElement;if(e&&e._tippy&&e._tippy.reference===e){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var nK="undefined"!=typeof window&&"undefined"!=typeof document&&!!window.msCrypto,nY=Object.assign({appendTo:nA,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),nZ=Object.keys(nY);function nG(e){var t=(e.plugins||[]).reduce(function(t,n){var r,i=n.name,o=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=nY[i])?r:o),t},{});return Object.assign({},e,t)}function nX(e,t){var n,r=Object.assign({},t,{content:nE(t.content,[e])},t.ignoreAttributes?{}:((n=t.plugins)?Object.keys(nG(Object.assign({},nY,{plugins:n}))):nZ).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{}));return r.aria=Object.assign({},nY.aria,r.aria),r.aria={expanded:"auto"===r.aria.expanded?t.interactive:r.aria.expanded,content:"auto"===r.aria.content?t.interactive?null:"describedby":r.aria.content},r}function nJ(e,t){e.innerHTML=t}function nQ(e){var t=n_();return!0===e?t.className=nS:(t.className=nj,nH(e)?t.appendChild(e):nJ(t,e)),t}function n0(e,t){nH(t.content)?(nJ(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?nJ(e,t.content):e.textContent=t.content)}function n1(e){var t=e.firstElementChild,n=nR(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(nT)}),arrow:n.find(function(e){return e.classList.contains(nS)||e.classList.contains(nj)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function n2(e){var t=n_(),n=n_();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=n_();function i(n,r){var i=n1(t),o=i.box,a=i.content,l=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),(n.content!==r.content||n.allowHTML!==r.allowHTML)&&n0(a,e.props),r.arrow?l?n.arrow!==r.arrow&&(o.removeChild(l),o.appendChild(nQ(r.arrow))):o.appendChild(nQ(r.arrow)):l&&o.removeChild(l)}return r.className=nT,r.setAttribute("data-state","hidden"),n0(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}n2.$$tippy=!0;var n3=1,n8=[],n6=[];function n5(e,t){void 0===t&&(t={});var n,r=nY.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",nW,nM),window.addEventListener("blur",n$);var i=Object.assign({},t,{plugins:r}),o=(nH(n=e)?[n]:nC(n,"NodeList")?nR(n):Array.isArray(n)?n:nR(document.querySelectorAll(n))).reduce(function(e,t){var n=t&&function(e,t){var n,r,i,o,a,l,s,c,u=nX(e,Object.assign({},nY,nG(nP(t)))),d=!1,p=!1,f=!1,h=!1,m=[],g=nB(q,u.interactiveDebounce),b=n3++,v=(n=u.plugins).filter(function(e,t){return n.indexOf(e)===t}),y={id:b,reference:e,popper:n_(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)},setProps:function(t){if(!y.state.isDestroyed){B("onBeforeUpdate",[y,t]),U();var n=y.props,r=nX(e,Object.assign({},n,nP(t),{ignoreAttributes:!0}));y.props=r,V(),n.interactiveDebounce!==r.interactiveDebounce&&(R(),g=nB(q,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?nO(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded"),D(),E(),w&&w(n,r),y.popperInstance&&(Z(),X().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),B("onAfterUpdate",[y,t])}},setContent:function(e){y.setProps({content:e})},show:function(){var t=y.state.isVisible,n=y.state.isDestroyed,r=!y.state.isEnabled,i=nV.isTouch&&!y.props.touch,o=nL(y.props.duration,0,nY.duration);if(!(t||n||r||i||(c||e).hasAttribute("disabled"))&&(B("onShow",[y],!1),!1!==y.props.onShow(y))){if(y.state.isVisible=!0,A()&&(x.style.visibility="visible"),E(),I(),y.state.isMounted||(x.style.transition="none"),A()){var a,l,u,d=n1(x);nI([d.box,d.content],0)}s=function(){var e;if(y.state.isVisible&&!h){if(h=!0,x.offsetHeight,x.style.transition=y.props.moveTransition,A()&&y.props.animation){var t=n1(x),n=t.box,r=t.content;nI([n,r],o),nN([n,r],"visible")}O(),D(),nD(n6,y),null==(e=y.popperInstance)||e.forceUpdate(),B("onMount",[y]),y.props.animation&&A()&&F(o,function(){y.state.isShown=!0,B("onShown",[y])})}},l=y.props.appendTo,u=c||e,(a=y.props.interactive&&l===nA||"parent"===l?u.parentNode:nE(l,[u])).contains(x)||a.appendChild(x),y.state.isMounted=!0,Z()}},hide:function(){var e=!y.state.isVisible,t=y.state.isDestroyed,n=!y.state.isEnabled,r=nL(y.props.duration,1,nY.duration);if(!e&&!t&&!n&&(B("onHide",[y],!1),!1!==y.props.onHide(y))){if(y.state.isVisible=!1,y.state.isShown=!1,h=!1,d=!1,A()&&(x.style.visibility="hidden"),R(),N(),E(!0),A()){var i,o=n1(x),a=o.box,l=o.content;y.props.animation&&(nI([a,l],r),nN([a,l],"hidden"))}(O(),D(),y.props.animation)?A()&&(i=y.unmount,F(r,function(){!y.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&i()})):y.unmount()}},hideWithInteractivity:function(e){L().addEventListener("mousemove",g),nD(n8,g),g(e)},enable:function(){y.state.isEnabled=!0},disable:function(){y.hide(),y.state.isEnabled=!1},unmount:function(){y.state.isVisible&&y.hide(),y.state.isMounted&&(G(),X().forEach(function(e){e._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),n6=n6.filter(function(e){return e!==y}),y.state.isMounted=!1,B("onHidden",[y]))},destroy:function(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),U(),delete e._tippy,y.state.isDestroyed=!0,B("onDestroy",[y]))}};if(!u.render)return y;var k=u.render(y),x=k.popper,w=k.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+y.id,y.popper=x,e._tippy=y,x._tippy=y;var T=v.map(function(e){return e.fn(y)}),S=e.hasAttribute("aria-expanded");return V(),D(),E(),B("onCreate",[y]),u.showOnCreate&&J(),x.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&L().addEventListener("mousemove",g)}),y;function j(){var e=y.props.touch;return Array.isArray(e)?e:[e,0]}function M(){return"hold"===j()[0]}function A(){var e;return!!(null!=(e=y.props.render)&&e.$$tippy)}function L(){var t,n,r=(c||e).parentNode;return r&&null!=(n=nO(r)[0])&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function C(e){return y.state.isMounted&&!y.state.isVisible||nV.isTouch||a&&"focus"===a.type?0:nL(y.props.delay,+!e,nY.delay)}function E(e){void 0===e&&(e=!1),x.style.pointerEvents=y.props.interactive&&!e?"":"none",x.style.zIndex=""+y.props.zIndex}function B(e,t,n){if(void 0===n&&(n=!0),T.forEach(function(n){n[e]&&n[e].apply(n,t)}),n){var r;(r=y.props)[e].apply(r,t)}}function O(){var t=y.props.aria;if(t.content){var n="aria-"+t.content,r=x.id;nO(y.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(y.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function D(){!S&&y.props.aria.expanded&&nO(y.props.triggerTarget||e).forEach(function(t){y.props.interactive?t.setAttribute("aria-expanded",y.state.isVisible&&t===(c||e)?"true":"false"):t.removeAttribute("aria-expanded")})}function R(){L().removeEventListener("mousemove",g),n8=n8.filter(function(e){return e!==g})}function P(t){if(!nV.isTouch||!f&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!(y.props.interactive&&nz(x,n))){if(nO(y.props.triggerTarget||e).some(function(e){return nz(e,n)})){if(nV.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else B("onClickOutside",[y,t]);!0===y.props.hideOnClick&&(y.clearDelayTimeouts(),y.hide(),p=!0,setTimeout(function(){p=!1}),y.state.isMounted||N())}}}function _(){f=!0}function H(){f=!1}function I(){var e=L();e.addEventListener("mousedown",P,!0),e.addEventListener("touchend",P,nM),e.addEventListener("touchstart",H,nM),e.addEventListener("touchmove",_,nM)}function N(){var e=L();e.removeEventListener("mousedown",P,!0),e.removeEventListener("touchend",P,nM),e.removeEventListener("touchstart",H,nM),e.removeEventListener("touchmove",_,nM)}function F(e,t){var n=n1(x).box;function r(e){e.target===n&&(nF(n,"remove",r),t())}if(0===e)return t();nF(n,"remove",l),nF(n,"add",r),l=r}function z(t,n,r){void 0===r&&(r=!1),nO(y.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})})}function V(){M()&&(z("touchstart",W,{passive:!0}),z("touchend",$,{passive:!0})),y.props.trigger.split(/\s+/).filter(Boolean).forEach(function(e){if("manual"!==e)switch(z(e,W),e){case"mouseenter":z("mouseleave",$);break;case"focus":z(nK?"focusout":"blur",K);break;case"focusin":z("focusout",K)}})}function U(){m.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)}),m=[]}function W(e){var t,n=!1;if(!(!y.state.isEnabled||Y(e))&&!p){var r=(null==(t=a)?void 0:t.type)==="focus";a=e,c=e.currentTarget,D(),!y.state.isVisible&&nC(e,"MouseEvent")&&n8.forEach(function(t){return t(e)}),"click"===e.type&&(0>y.props.trigger.indexOf("mouseenter")||d)&&!1!==y.props.hideOnClick&&y.state.isVisible?n=!0:J(e),"click"===e.type&&(d=!n),n&&!r&&Q(e)}}function q(t){var n,r,i,o=t.target,a=(c||e).contains(o)||x.contains(o);("mousemove"!==t.type||!a)&&(n=X().concat(x).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:u}:null}).filter(Boolean),r=t.clientX,i=t.clientY,n.every(function(e){var t=e.popperRect,n=e.popperState,o=e.props.interactiveBorder,a=n.placement.split("-")[0],l=n.modifiersData.offset;if(!l)return!0;var s="bottom"===a?l.top.y:0,c="top"===a?l.bottom.y:0,u="right"===a?l.left.x:0,d="left"===a?l.right.x:0,p=t.top-i+s>o,f=i-t.bottom-c>o,h=t.left-r+u>o,m=r-t.right-d>o;return p||f||h||m})&&(R(),Q(t)))}function $(e){if(!(Y(e)||y.props.trigger.indexOf("click")>=0&&d)){if(y.props.interactive)return void y.hideWithInteractivity(e);Q(e)}}function K(t){0>y.props.trigger.indexOf("focusin")&&t.target!==(c||e)||y.props.interactive&&t.relatedTarget&&x.contains(t.relatedTarget)||Q(t)}function Y(e){return!!nV.isTouch&&M()!==e.type.indexOf("touch")>=0}function Z(){G();var t=y.props,n=t.popperOptions,r=t.placement,i=t.offset,o=t.getReferenceClientRect,a=t.moveTransition,l=A()?n1(x).arrow:null,u=o?{getBoundingClientRect:o,contextElement:o.contextElement||c||e}:e,d=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(A()){var n=n1(x).box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];A()&&l&&d.push({name:"arrow",options:{element:l,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),y.popperInstance=nw(u,x,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:d}))}function G(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function X(){return nR(x.querySelectorAll("[data-tippy-root]"))}function J(e){y.clearDelayTimeouts(),e&&B("onTrigger",[y,e]),I();var t=C(!0),n=j(),i=n[0],o=n[1];nV.isTouch&&"hold"===i&&o&&(t=o),t?r=setTimeout(function(){y.show()},t):y.show()}function Q(e){if(y.clearDelayTimeouts(),B("onUntrigger",[y,e]),!y.state.isVisible)return void N();if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0)||!d){var t=C(!1);t?i=setTimeout(function(){y.state.isVisible&&y.hide()},t):o=requestAnimationFrame(function(){y.hide()})}}}(t,i);return n&&e.push(n),e},[]);return nH(e)?o[0]:o}n5.defaultProps=nY,n5.setDefaultProps=function(e){Object.keys(e).forEach(function(t){nY[t]=e[t]})},n5.currentInput=nV,Object.assign({},nh,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),n5.setDefaultProps({render:n2});var n4=e.i(566119),n9=e.i(89685);new el.PluginKey("template-variable");let n7=ea.Node.create({name:H.SparkTypes.TemplateVariable.name,addOptions:()=>({options:[],currentValues:{}}),group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({fallback:{default:null},key:{default:null},label:{default:null}}),parseHTML:()=>[{tag:"span",getAttrs:e=>e.dataset.type===H.SparkTypes.TemplateVariable.name&&null}],renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["span",(0,ea.mergeAttributes)({"data-type":H.SparkTypes.TemplateVariable.name},n),re({node:t})]},renderText(e){let{node:t}=e;return re({node:t})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(e=>{let{tr:t,state:n}=e,r=!1,{selection:i}=n,{empty:o,anchor:a}=i;return!!o&&(n.doc.nodesBetween(a-1,a,(e,n)=>e.type.name!==this.name||(r=!0,t.insertText(H.SparkTypes.TemplateVariable.triggerChar||"",n,n+e.nodeSize),!1)),r)})}},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,extension:n}=e;return(0,T.jsx)(rn,{attrs:t.attrs,extension:n})}),addProseMirrorPlugins(){let e=rt({type:H.SparkTypes.TemplateVariable.name,char:H.SparkTypes.TemplateVariable.triggerChar,filterItems:e=>{let{query:t}=e;return this.options.options.filter(e=>e.label.toLowerCase().includes(t.toLowerCase())).slice(0,5)}});return[(0,tC.default)({editor:this.editor,...e})]}}),re=e=>{let{node:t}=e;return t.attrs.label},rt=e=>{let{type:t,char:n,filterItems:r}=e;return{items:r,char:n,render:()=>{let e,t;return{onStart:n=>{e=new C.ReactRenderer(rr,{props:n,editor:n.editor}),t=n5("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(n){e.updateProps(n),t[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var r;return"Escape"===n.event.key?(t[0].hide(),!0):null==(r=e.ref)?void 0:r.onKeyDown(n)},onExit(){t[0].destroy(),e.destroy()}}},command:e=>{var n;let{editor:r,range:i,props:o}=e,a=r.view.state.selection.$to.nodeAfter;(null==a||null==(n=a.text)?void 0:n.startsWith(" "))&&(i.to+=1),r.chain().focus().insertContentAt(i,[{type:t,attrs:o},{type:"text",text:" "}]).run()}}},rn=e=>{let{attrs:t,extension:n}=e,{label:r,key:i,fallback:o}=t,a=(0,n9.getIn)(n.options.currentValues,i)||"Fallback: ".concat(o);return(0,T.jsx)(C.NodeViewWrapper,{as:"span",children:(0,T.jsx)(n4.LuxTooltip,{content:a,children:(0,T.jsx)("span",{className:"variable",children:r})})})},rr=(0,S.forwardRef)((e,t)=>{let[n,r]=(0,S.useState)(0),i=t=>{let n=e.items[t];n&&e.command(n)};return((0,S.useEffect)(()=>r(0),[e.items]),(0,S.useImperativeHandle)(t,()=>({onKeyDown:t=>{let{event:o}=t;return"ArrowUp"===o.key?(r((n+e.items.length-1)%e.items.length),!0):"ArrowDown"===o.key?(r((n+1)%e.items.length),!0):"Enter"===o.key&&(i(n),!0)}})),0===e.items.length)?null:(0,T.jsxs)("div",{className:"jsx-7afd6c24462b754b menu",children:[(0,T.jsx)("div",{className:"jsx-7afd6c24462b754b menu-content",children:(0,T.jsx)("div",{className:"jsx-7afd6c24462b754b rows overflow-auto",children:e.items.map((e,t)=>(0,T.jsx)("div",{onClick:()=>i(t),className:"jsx-7afd6c24462b754b",children:(0,T.jsx)(ri,{item:e,selected:t===n,onHover:()=>{r(t)}})},e.key))})}),(0,T.jsx)(A.default,{id:"7afd6c24462b754b",children:".menu.jsx-7afd6c24462b754b{border-radius:var(--border-radius);border:1px solid var(--menu-border-color);background-color:var(--menu-bg-color);box-shadow:var(--shadow-sm);overflow:hidden}.menu-content.jsx-7afd6c24462b754b{background:var(--primary-bg-color);min-width:120px;max-width:240px}.rows.jsx-7afd6c24462b754b{max-height:70vh}"})]})}),ri=e=>{let{item:t,selected:n,onHover:r}=e;return(0,T.jsxs)("div",{onMouseEnter:r,className:"jsx-c45bc6ebec122654 "+((0,E.default)("menu-item flex-center spread",{selected:n})||""),children:[(0,T.jsx)("div",{className:"jsx-c45bc6ebec122654 flex-center icon-text",children:(0,T.jsx)("div",{className:"jsx-c45bc6ebec122654 menu-text flex-1",children:t.label})}),(0,T.jsx)(A.default,{id:"c45bc6ebec122654",children:".menu-text.jsx-c45bc6ebec122654{text-overflow:ellipsis;min-width:0;overflow:hidden}.menu-item.jsx-c45bc6ebec122654{color:var(--menu-item-color);cursor:pointer;z-index:1;padding:.375rem .75rem;font-size:.9rem;position:relative}.menu-item.selected.jsx-c45bc6ebec122654{color:var(--menu-item-hover-color);background-color:var(--menu-item-hover-bg-color)}"})]})};var ro=e.i(626405);function ra(e){let{types:t,type:n}=e;return!!n&&Array.isArray(t)&&t.includes(n)}let rl=ea.Extension.create({name:"trailingNode",addOptions:()=>({node:H.SparkTypes.Block.Paragraph,notAfter:[H.SparkTypes.Block.Paragraph]}),addProseMirrorPlugins(){let e=new el.PluginKey(this.name),t=Object.entries(this.editor.schema.nodes).map(e=>{let[,t]=e;return t}).filter(e=>this.options.notAfter.includes(e.name));return[new el.Plugin({key:e,appendTransaction:(t,n,r)=>{let{doc:i,tr:o,schema:a}=r,l=e.getState(r),s=i.content.size,c=a.nodes[this.options.node];if(l)return o.insert(s,c.create())},state:{init:(e,n)=>{var r;let i=n.tr.doc.lastChild;return!ra({type:null!=(r=null==i?void 0:i.type)?r:null,types:t})},apply:(e,n)=>{var r;if(!e.docChanged)return n;let i=e.doc.lastChild;return!ra({type:null!=(r=null==i?void 0:i.type)?r:null,types:t})}}})]}}),rs=ea.Mark.create({name:H.SparkTypes.Mark.Underline,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[],renderHTML(e){let{HTMLAttributes:t}=e;return["u",(0,ea.mergeAttributes)(this.options.HTMLAttributes,t),0]}}),rc=[H.SparkTypes.Block.Attachment,H.SparkTypes.Block.Button,H.SparkTypes.Block.Event,H.SparkTypes.Block.Image,H.SparkTypes.Block.VideoLoom,H.SparkTypes.Block.VideoVimeo,H.SparkTypes.Block.VideoYoutube],ru="within-selection",rd=ea.Extension.create({name:"user_interface",addOptions:()=>({toggleMenuOpen:()=>null}),addKeyboardShortcuts(){return{"Mod-c":()=>rf({state:this.editor.view.state,command:"copy"}),"Mod-x":()=>rf({state:this.editor.view.state,command:"cut"}),"Mod-/":()=>!eG({state:this.editor.view.state})||(this.options.toggleMenuOpen(),!1)}},addProseMirrorPlugins:()=>[new el.Plugin({view:()=>({update(e,t){rp({selection:t.selection})&&e.dom.querySelectorAll(".".concat(ru)).forEach(e=>{e.classList.remove(ru)});let{selection:n}=e.state;if(!e.hasFocus()||!rp({selection:n}))return;let{from:r,to:i}=n;e.state.doc.nodesBetween(r,i,(t,n)=>{if(rc.includes(t.type.name)){var r;null==(r=e.nodeDOM(n).querySelector(".".concat("selectable")))||r.classList.add(ru)}return!0})}})})]}),rp=e=>{let{selection:t}=e;return!(t.empty||(0,ea.isNodeSelection)(t))},rf=e=>{let{state:t,command:n}=e;return t.selection instanceof el.NodeSelection&&rc.includes(t.selection.node.type.name)&&document.execCommand(n),!1};var rh=e.i(441524);let rm=e=>{let{iframeSrc:t,selected:n}=e,[r,i]=(0,S.useState)(!0),[o,a]=(0,S.useState)(!1);return(0,T.jsxs)(C.NodeViewWrapper,{"data-drag-handle":!0,className:"video-view-component",children:[(0,T.jsxs)("div",{className:"jsx-3efe3930a46ff700 "+((0,E.default)("selectable ",{selected:n,"video-wrapper":t})||""),children:[r&&(0,T.jsx)("div",{onDoubleClick:()=>i(!1),onMouseOver:()=>a(!0),onMouseOut:()=>a(!1),className:"jsx-3efe3930a46ff700 video-lock",children:(0,T.jsx)(rh.LuxFade,{show:o,children:(0,T.jsx)("div",{className:"jsx-3efe3930a46ff700 message",children:navigator.maxTouchPoints>0?(0,T.jsx)(D.T,{defaultMessage:"Double tap to interact",id:"rPMjNi"}):(0,T.jsx)(D.T,{defaultMessage:"Drag to reorder or double click to interact",id:"pmqZ1O"})})})}),(0,T.jsx)("iframe",{src:t,allowFullScreen:!0,style:{pointerEvents:r?"none":"auto"},className:"jsx-3efe3930a46ff700"})]}),(0,T.jsx)(A.default,{id:"3efe3930a46ff700",children:".video-wrapper.jsx-3efe3930a46ff700{background:var(--gray-80);border-radius:var(--border-radius);height:0;margin-bottom:20px;padding-top:10px;padding-bottom:56.25%;position:relative;overflow:hidden}.video-wrapper.jsx-3efe3930a46ff700 .video-lock.jsx-3efe3930a46ff700{z-index:10;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.video-wrapper.jsx-3efe3930a46ff700 .video-lock.jsx-3efe3930a46ff700 .message.jsx-3efe3930a46ff700{border-radius:var(--border-radius);color:#fff;background:rgba(0,0,0,.6);padding:0 1rem;font-size:2rem;display:flex}.video-wrapper.jsx-3efe3930a46ff700 iframe.jsx-3efe3930a46ff700{border:none;width:100%;height:100%;position:absolute;top:0;left:0}.selected.jsx-3efe3930a46ff700,.within-selection.jsx-3efe3930a46ff700{outline:2px solid var(--editor-selected-node-border-color,#76adff)}"})]})},rg=/^(?:https?:\/\/)?(?:www\.)?loom\.com\/share\/([a-zA-Z0-9]{32})/i,rb=ea.Node.create({name:H.SparkTypes.Block.VideoLoom,group:"block",draggable:!0,addAttributes:()=>({loom_id:{default:null},duration_seconds:{default:null},title:{default:null},description:{default:null},width:{default:null},height:{default:null},thumbnail_url:{default:null},thumbnail_width:{default:null},thumbnail_height:{default:null}}),parseHTML:()=>[{tag:H.SparkTypes.Block.VideoLoom}],renderHTML(e){let{HTMLAttributes:t}=e;return[H.SparkTypes.Block.VideoLoom,(0,ea.mergeAttributes)(t)]},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,selected:n}=e;return(0,T.jsx)(rv,{attrs:t.attrs,selected:n})}),addProseMirrorPlugins(){return[new el.Plugin({props:{handlePaste:(e,t)=>{if(!em(e.state))return!1;let{clipboardData:n}=t,r=null==n?void 0:n.getData("text");if(!r)return!1;let i=r.replace(/^[\s\u200B-\u200D\uFEFF]+|[\s\u200B-\u200D\uFEFF]+$/g,"").match(rg);if(null==i)return!1;let o=i[1],a=e.state.selection.$anchor.pos;return fetch("https://www.loom.com/v1/oembed?url=https://www.loom.com/share/".concat(o,"&format=json")).then(async t=>{if(!t.ok)throw await eH.FetchError.fromResponse(t);let n=await t.json();e.dispatch(e.state.tr.replaceWith(a,a,this.type.create({loom_id:o,duration_seconds:n.duration,title:n.title,description:n.description,width:n.width,height:n.height,thumbnail_url:n.thumbnail_url,thumbnail_width:n.thumbnail_width,thumbnail_height:n.thumbnail_height})))}).catch(()=>{(0,eo.toastError)("We had a problem connecting to Loom. Please try again.")}),!0}}}),new el.Plugin({props:{handleKeyDown:(e,t)=>ef({nodeName:H.SparkTypes.Block.VideoLoom,view:e,event:t})}})]}}),rv=e=>{let{attrs:t,selected:n}=e,r=H.SparkTypes.Video.getIframeSrc({type:H.SparkTypes.Block.VideoLoom,attrs:t});return(0,T.jsx)(rm,{selected:n,iframeSrc:r})},ry=/^(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/i,rk=ea.Node.create({name:H.SparkTypes.Block.VideoVimeo,group:"block",draggable:!0,addAttributes:()=>({vimeo_id:{default:null},duration_seconds:{default:null},title:{default:null},description:{default:null},width:{default:null},height:{default:null},thumbnail_url:{default:null},thumbnail_width:{default:null},thumbnail_height:{default:null}}),parseHTML:()=>[{tag:H.SparkTypes.Block.VideoVimeo}],renderHTML(e){let{HTMLAttributes:t}=e;return[H.SparkTypes.Block.VideoVimeo,(0,ea.mergeAttributes)(t)]},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,selected:n}=e;return(0,T.jsx)(rx,{attrs:t.attrs,selected:n})}),addProseMirrorPlugins(){return[new el.Plugin({props:{handlePaste:(e,t)=>{if(!em(e.state))return!1;let{clipboardData:n}=t,r=null==n?void 0:n.getData("text");if(!r)return!1;let i=r.replace(/^[\s\u200B-\u200D\uFEFF]+|[\s\u200B-\u200D\uFEFF]+$/g,"").match(ry);if(null==i)return!1;let o=i[1],a=e.state.selection.$anchor.pos;return fetch("https://vimeo.com/api/oembed.json?url=https://vimeo.com/".concat(o)).then(async t=>{if(!t.ok)throw await eH.FetchError.fromResponse(t);let n=await t.json();e.dispatch(e.state.tr.replaceWith(a,a,this.type.create({vimeo_id:o,duration_seconds:n.duration,title:n.title,description:n.description,width:n.width,height:n.height,thumbnail_url:n.thumbnail_url,thumbnail_width:n.thumbnail_width,thumbnail_height:n.thumbnail_height})))}).catch(()=>{(0,eo.toastError)("We had a problem connecting to Vimeo. Please try again.")}),!0}}}),new el.Plugin({props:{handleKeyDown:(e,t)=>ef({nodeName:H.SparkTypes.Block.VideoVimeo,view:e,event:t})}})]}}),rx=e=>{let{attrs:t,selected:n}=e,r=H.SparkTypes.Video.getIframeSrc({type:H.SparkTypes.Block.VideoVimeo,attrs:t});return(0,T.jsx)(rm,{selected:n,iframeSrc:r})},rw=[/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/(?:.*[?&]v=)([a-zA-Z0-9_-]{11})/i,/^(?:https?:\/\/)?(?:www\.)?youtube(?:-nocookie)?\.com\/(?:v|embed)\/([a-zA-Z0-9_-]{11})/i,/^(?:https?:\/\/)?(?:www\.)?youtu\.be\/([a-zA-Z0-9_-]{11})/i],rT=ea.Node.create({name:H.SparkTypes.Block.VideoYoutube,group:"block",draggable:!0,addAttributes:()=>({youtube_id:{default:null},title:{default:null},width:{default:null},height:{default:null},thumbnail_url:{default:null},thumbnail_width:{default:null},thumbnail_height:{default:null}}),parseHTML:()=>[{tag:H.SparkTypes.Block.VideoYoutube}],renderHTML(e){let{HTMLAttributes:t}=e;return[H.SparkTypes.Block.VideoYoutube,(0,ea.mergeAttributes)(t)]},addNodeView:()=>(0,C.ReactNodeViewRenderer)(e=>{let{node:t,selected:n}=e;return(0,T.jsx)(rS,{attrs:t.attrs,selected:n})}),addProseMirrorPlugins(){return[new el.Plugin({props:{handlePaste:(e,t)=>{if(!em(e.state))return!1;let{clipboardData:n}=t,r=null==n?void 0:n.getData("text");if(!r)return!1;let i=r.replace(/^[\s\u200B-\u200D\uFEFF]+|[\s\u200B-\u200D\uFEFF]+$/g,""),o=null;for(let e of rw)if(null!==(o=i.match(e)))break;if(null==o)return!1;let a=o[1],l=e.state.selection.$anchor.pos;return fetch("https://youtube.com/oembed?url=https://youtube.com/watch?v=".concat(a,"&format=json")).then(async t=>{if(!t.ok)throw await eH.FetchError.fromResponse(t);let n=await t.json();e.dispatch(e.state.tr.replaceWith(l,l,this.type.create({youtube_id:a,title:n.title,width:n.width,height:n.height,thumbnail_url:n.thumbnail_url,thumbnail_width:n.thumbnail_width,thumbnail_height:n.thumbnail_height})))}).catch(()=>{(0,eo.toastError)("We had a problem connecting to YouTube. Please try again.")}),!0}}}),new el.Plugin({props:{handleKeyDown:(e,t)=>ef({nodeName:H.SparkTypes.Block.VideoYoutube,view:e,event:t})}})]}}),rS=e=>{let{attrs:t,selected:n}=e,r=H.SparkTypes.Video.getIframeSrc({type:H.SparkTypes.Block.VideoYoutube,attrs:t});return(0,T.jsx)(rm,{selected:n,iframeSrc:r})},rj=e=>{let t=0;return Array.from(e.childNodes).forEach(e=>{if(e instanceof HTMLElement){let n=(e=>{let t=e.getAttribute("style");if(t){let e=t.match(/font-size:\s*(\d+\.?\d*)pt/);if(e)return 1.3*parseFloat(e[1]);let n=t.match(/font-size:\s*(\d+\.?\d*)px/);if(n)return parseFloat(n[1]);let r=t.match(/font-size:\s*(\d+\.?\d*)rem/);if(r)return 16*parseFloat(r[1])}return null})(e);null!==n&&n>t&&(t=n)}}),t};var rM=e.i(746349),rA=e.i(95963),rL=e.i(681912),rC=e.i(658823),rE=e.i(998523);function rB(){return(rB=Object.assign.bind()).apply(null,arguments)}let rO=e=>S.createElement("svg",rB({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),k||(k=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.8 7.2V2.8H8a2.2 2.2 0 0 1 0 4.4zM3.2 8V2.778c0-.872.707-1.578 1.578-1.578H8a3.8 3.8 0 0 1 2.748 6.425A3.8 3.8 0 0 1 9 14.8H5.263A2.063 2.063 0 0 1 3.2 12.737zm1.6 4.737V8.8H9a2.2 2.2 0 0 1 0 4.4H5.263a.463.463 0 0 1-.463-.463",clipRule:"evenodd"})));function rD(){return(rD=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,rO],84361);let rR=e=>S.createElement("svg",rD({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),x||(x=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.028 2H12a.8.8 0 0 1 0 1.6h-1.44L7.142 13H9a.8.8 0 0 1 0 1.6H4A.8.8 0 0 1 4 13h1.44l3.418-9.4H7A.8.8 0 0 1 7 2z",clipRule:"evenodd"})));function rP(){return(rP=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,rR],555142);let r_=e=>S.createElement("svg",rP({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),w||(w=S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.118 3.25a2.393 2.393 0 0 1 3.385 3.383.8.8 0 1 0 1.13 1.132A3.993 3.993 0 0 0 7.987 2.12L6.182 3.924a3.99 3.99 0 0 0-.467 5.085.8.8 0 0 0 1.317-.908 2.39 2.39 0 0 1 .281-3.046zm.922 3.49a.8.8 0 0 0-1.317.908 2.39 2.39 0 0 1-.282 3.045L6.635 12.5a2.393 2.393 0 0 1-3.384-3.383.8.8 0 0 0-1.131-1.131 3.993 3.993 0 0 0 5.647 5.645l1.805-1.805a3.99 3.99 0 0 0 .468-5.084Z",clipRule:"evenodd"})));e.s(["default",0,r_],951920);var rH=e.i(689419);let rI=e=>{let{active:t,icon:n,onMouseDown:r,className:i}=e;return(0,T.jsxs)("div",{onMouseDown:r,className:"jsx-e5e53749827fc62 "+((0,E.default)("toolbar-btn animated",i,{active:t})||""),children:[n,(0,T.jsx)(A.default,{id:"e5e53749827fc62",children:".toolbar-btn.jsx-e5e53749827fc62{cursor:pointer;color:var(--rich-text-toolbar-button-color);transition:var(--transition);border-radius:.25rem;align-items:center;padding:.25rem;line-height:1;display:flex}.toolbar-btn.jsx-e5e53749827fc62:hover{background-color:var(--rich-text-toolbar-button-hover-bg-color);color:var(--rich-text-toolbar-button-hover-color)}.toolbar-btn.jsx-e5e53749827fc62 svg{width:1rem;height:1rem}.toolbar-btn.active.jsx-e5e53749827fc62{color:var(--rich-text-toolbar-button-active-color)}.toolbar-btn.active.jsx-e5e53749827fc62:hover{background-color:var(--rich-text-toolbar-button-active-hover-bg-color)}"})]})};class rN{renderContent(){let{state:e}=this.editor.view,{from:t}=e.selection;this.root.render((0,T.jsx)(rz,{mode:this.mode,editor:this.editor,onLinkFinished:()=>this.setMode("text"),onRequestEditLink:()=>this.setMode("link"),allowHeaders:this.allowHeaders},"".concat(t,"-").concat(this.mode)))}setMode(e){this.mode=e,this.renderContent()}update(e,t){let{state:n,composing:r}=e,{doc:i,selection:o}=n,a=t&&t.doc.eq(i)&&t.selection.eq(o);if(r||a)return;let{empty:l,ranges:s}=o,c=Math.min(...s.map(e=>e.$from.pos)),u=Math.max(...s.map(e=>e.$to.pos)),d=!i.textBetween(c,u).length&&(0,ea.isTextSelection)(e.state.selection);l||d?this.hide():(this.editor.isActive(H.SparkTypes.Block.Button)?this.setMode("button"):this.editor.isActive(H.SparkTypes.Mark.Link)?this.setMode("link"):this.setMode("text"),this.updatePosition(c,u),this.show())}updatePosition(e,t){var n,r;let i=((0,ea.isNodeSelection)(this.view.state.selection)?this.view.nodeDOM(e):null)||{getBoundingClientRect:()=>(0,ea.posToDOMRect)(this.view,e,t)};null==(n=this.cleanup)||n.call(this);let o=()=>{(0,rA.computePosition)(i,this.popup,{placement:"top",middleware:[(0,rA.offset)({mainAxis:this.offset.y,crossAxis:this.offset.x}),(0,rA.flip)(),(0,rA.shift)({padding:4}),(0,rA.arrow)({element:this.arrowElement,padding:8})]}).then(e=>{let{x:t,y:n,placement:r,middlewareData:i}=e;if(Object.assign(this.popup.style,{left:"".concat(t,"px"),top:"".concat(n,"px")}),i.arrow){let e="top"===r.split("-")[0]?"bottom":"top",t="top"===r.split("-")[0]?"top":"bottom",{x:n}=i.arrow;Object.assign(this.arrowElement.style,{left:"".concat(n,"px"),[e]:"-4px",[t]:"unset"}),this.arrowElement.classList.add("lux-menu-arrow"),r.startsWith("top")?this.arrowElement.classList.add("flipped"):this.arrowElement.classList.remove("flipped")}})};null==(r=this.cleanup)||r.call(this),this.cleanup=(0,rA.autoUpdate)(i instanceof HTMLElement?i:this.view.dom,this.popup,o)}show(){this.popup.style.display="block",this.isVisible=!0}destroy(){var e;this.popup.remove(),null==(e=this.cleanup)||e.call(this),this.view.dom.removeEventListener("dragstart",this.hide),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.isVisible=!1}constructor({editor:e,view:t,allowHeaders:n}){(0,rM._)(this,"editor",void 0),(0,rM._)(this,"view",void 0),(0,rM._)(this,"isVisible",void 0),(0,rM._)(this,"root",void 0),(0,rM._)(this,"mode","text"),(0,rM._)(this,"popup",void 0),(0,rM._)(this,"arrowElement",void 0),(0,rM._)(this,"allowHeaders",void 0),(0,rM._)(this,"cleanup",null),(0,rM._)(this,"offset",{x:0,y:8}),(0,rM._)(this,"focusHandler",()=>{setTimeout(()=>this.update(this.editor.view))}),(0,rM._)(this,"blurHandler",e=>{var t;let{event:n}=e;(null==n?void 0:n.relatedTarget)&&(null==(t=this.popup.parentNode)?void 0:t.contains(n.relatedTarget))||this.hide()}),(0,rM._)(this,"hide",()=>{var e;this.popup.style.display="none",null==(e=this.cleanup)||e.call(this),this.isVisible=!1}),(0,rM._)(this,"handleClick",(e,t)=>{if(this.editor.isActive(H.SparkTypes.Mark.Link)){let{schema:n,doc:r}=e.state,i=(0,ea.getMarkRange)(r.resolve(t),n.marks.link);return!!i&&(this.editor.commands.setTextSelection(i),this.editor.commands.focus(),this.setMode("link"),!0)}return!1}),this.editor=e,this.view=t,this.allowHeaders=n,this.popup=document.createElement("div"),this.popup.className="lux-menu-wrapper",this.popup.style.position="absolute",this.popup.style.display="none",this.isVisible=!1;const r=document.createElement("div");this.popup.appendChild(r),this.arrowElement=document.createElement("div"),this.arrowElement.className="lux-menu-arrow",this.popup.appendChild(this.arrowElement),this.view.dom.addEventListener("dragstart",this.hide),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.root=(0,rL.createRoot)(r),this.renderContent(),document.body.appendChild(this.popup)}}let rF=new el.PluginKey("SelectionMenu"),rz=e=>{let{mode:t,editor:n,onLinkFinished:r,onRequestEditLink:i,allowHeaders:o}=e;return(0,T.jsxs)("div",{className:"jsx-684a6a51fa33187a floating-menu-wrapper",children:["link"===t&&(0,T.jsx)(rW,{editor:n,onLinkFinished:r}),"text"===t&&(0,T.jsx)(rU,{editor:n,onRequestEditLink:i,allowHeaders:o}),"button"===t&&(0,T.jsx)(rq,{editor:n}),(0,T.jsx)(A.default,{id:"684a6a51fa33187a",children:".floating-menu-wrapper.jsx-684a6a51fa33187a{position:relative}"})]})},rV=e=>{let{children:t,className:n,showError:r}=e;return(0,T.jsxs)("div",{className:"jsx-21ad1861deeb6d6b "+((0,E.default)("floating-menu",n,{error:r})||""),children:[t,(0,T.jsx)(A.default,{id:"21ad1861deeb6d6b",children:".floating-menu.jsx-21ad1861deeb6d6b{background:var(--primary-bg-color);border-radius:var(--border-radius);box-shadow:var(--shadow-sm);padding:.5rem}.floating-menu.error.jsx-21ad1861deeb6d6b{border-color:var(--error-color)}"})]})},rU=e=>{let{editor:t,onRequestEditLink:n,allowHeaders:r}=e,i=new Set(t.extensionManager.extensions);return(0,T.jsxs)(rV,{className:"flex-center text-menu gap-2",children:[r&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(rI,{icon:(0,T.jsx)(G,{}),onMouseDown:e=>{e.preventDefault(),t.chain().focus().toggleHeading({level:1}).run()},active:null==t?void 0:t.isActive("heading",{level:1})}),(0,T.jsx)(rI,{icon:(0,T.jsx)(J,{}),onMouseDown:e=>{e.preventDefault(),t.chain().focus().toggleHeading({level:2}).run()},active:null==t?void 0:t.isActive("heading",{level:2})})]}),i.has(e4)&&(0,T.jsx)(rI,{icon:(0,T.jsx)(rO,{}),onMouseDown:e=>{e.preventDefault(),t.chain().focus().toggleBold().run()},active:null==t?void 0:t.isActive("bold")}),i.has(tg)&&(0,T.jsx)(rI,{icon:(0,T.jsx)(rR,{}),onMouseDown:e=>{e.preventDefault(),t.chain().focus().toggleItalic().run()},active:null==t?void 0:t.isActive("italic")}),i.has(eA.Link)&&(0,T.jsx)(rI,{onMouseDown:e=>{e.preventDefault(),n()},active:null==t?void 0:t.isActive("link"),icon:(0,T.jsx)(r_,{})}),r&&i.has(e8)&&(0,T.jsx)(rI,{icon:(0,T.jsx)(V,{}),onMouseDown:e=>{e.preventDefault(),t.chain().focus().toggleBlockquote().run()},active:null==t?void 0:t.isActive("blockquote")})]})},rW=e=>{let{editor:t,onLinkFinished:n}=e,r=(0,S.useRef)(null),[i,o]=(0,S.useState)(""),[a,l]=(0,S.useState)(!1),s=(0,S.useCallback)(()=>{let e=(0,rH.normalizeUrl)(i);e?(t.chain().focus().setLink({href:e}).run(),n(),l(!1),t.commands.setTextSelection(t.view.state.selection.to)):l(!0)},[i,t,l,n]);return(0,S.useEffect)(()=>{var e;o(t.getAttributes("link").href||""),null==(e=r.current)||e.focus(),l(!1)},[o,t,l]),(0,T.jsxs)(rV,{className:"flex-center",showError:a,children:[(0,T.jsxs)("div",{className:"jsx-5a8dd665bf1e4e72 editor-link",children:[(0,T.jsx)("input",{type:"url",ref:r,value:i,onChange:e=>{l(!1),o(e.target.value)},onKeyDown:e=>{"Enter"==e.key?(e.preventDefault(),e.stopPropagation(),s()):"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),n())},placeholder:"Enter link URL",className:"jsx-5a8dd665bf1e4e72 editor-link-input"}),(0,T.jsx)(rI,{onMouseDown:e=>{e.preventDefault(),s()},active:!1,icon:(0,T.jsx)(rC.Check16Icon,{}),className:"mr-1"}),(0,T.jsx)(rI,{icon:(0,T.jsx)(rE.Trash16Icon,{}),onMouseDown:e=>{e.preventDefault(),t.chain().focus().unsetLink().run(),n()},active:!1})]}),(0,T.jsx)(A.default,{id:"5a8dd665bf1e4e72",children:".editor-link.jsx-5a8dd665bf1e4e72{display:flex}.editor-link-input.jsx-5a8dd665bf1e4e72{color:var(--input-color);background:0 0;border:none;width:200px;font-size:.75rem;display:flex}.editor-link-input.jsx-5a8dd665bf1e4e72:focus{outline:none}"})]})},rq=e=>{let{editor:t}=e,{text:n,href:r}=t.getAttributes(H.SparkTypes.Block.Button),i=(0,S.useRef)(null),o=(0,S.useRef)(null);return(0,T.jsxs)(rV,{children:[(0,T.jsx)("input",{type:"text",placeholder:"Button Text",ref:i,value:null!=n?n:"",onChange:e=>{t.commands.updateAttributes(H.SparkTypes.Block.Button,{text:e.target.value})},onKeyDown:e=>{if("Enter"===e.key||"ArrowDown"===e.key){var t;null==(t=o.current)||t.focus()}},className:"jsx-1f4de3cf6cb13b1d editor-button-input name-input"}),(0,T.jsx)("div",{className:"jsx-1f4de3cf6cb13b1d divider"}),(0,T.jsx)("input",{type:"url",placeholder:"Button Label",ref:o,value:null!=r?r:"",onChange:e=>{t.commands.updateAttributes(H.SparkTypes.Block.Button,{href:e.target.value})},onKeyDown:e=>{if("ArrowUp"===e.key){var n;null==(n=i.current)||n.focus()}"Enter"==e.key&&(e.preventDefault(),e.stopPropagation(),t.commands.focus(),t.commands.setTextSelection(t.view.state.selection.to+1))},className:"jsx-1f4de3cf6cb13b1d editor-button-input"}),(0,T.jsx)(A.default,{id:"1f4de3cf6cb13b1d",children:".divider.jsx-1f4de3cf6cb13b1d{border-bottom:1px solid var(--divider-color);margin:.5rem -.5rem}.editor-button-input.jsx-1f4de3cf6cb13b1d{color:var(--input-color);background:0 0;border:none;width:200px;font-size:.8rem;display:block}.editor-button-input.jsx-1f4de3cf6cb13b1d:focus{outline:none}"})]})},r$=e=>{let{editor:t}=e,n=(0,S.useMemo)(()=>null==t?void 0:t.extensionManager.extensions,[null==t?void 0:t.extensionManager.extensions]),r=(0,S.useMemo)(()=>{let e=n.find(e=>e.name===H.SparkTypes.Block.Heading);return!!(null==e?void 0:e.options.enabled)},[n]);return(0,S.useEffect)(()=>{var e;let n;return t.registerPlugin((e={editor:t,allowHeaders:r},new el.Plugin({key:rF,view:t=>n=new rN({view:t,...e}),props:{handleClick:(e,t)=>!!n&&n.handleClick(e,t),handleKeyDown:(e,t)=>{if("k"===t.key&&(t.metaKey||t.ctrlKey)){let{empty:r}=e.state.selection;if((!r||n.isVisible)&&(t.preventDefault(),t.stopPropagation()),!r&&(0,ea.isTextSelection)(e.state.selection)&&n)return"link"===n.mode?n.setMode("text"):(n.setMode("link"),n.show()),!0}return!1}}}))),()=>{t.unregisterPlugin(rF)}},[]),null};var rK=((a={}).Rich="rich",a.EventDescription="event-description",a.Simple="simple",a.EmailSubject="email-subject",a.EmailBody="email-body",a);let rY=(0,S.forwardRef)((e,t)=>{var n;let{initialDocValue:r,setDocValue:i,disabled:o,onCmdEnter:a,placeholder:l,minHeight:s,autoFocus:c,inputStyle:u="lux-input",cursorBottomPadding:d,forWebview:p,onSelectionChange:f,tintColor:h,uploadAttachment:m,uploadImage:g,lookupSlug:b,user:v,onPaste:y,...k}=e,x=(0,R.useT)(),[w,j]=(0,S.useState)(!1),M=(0,S.useCallback)(e=>{if(!f)return;let{editor:t}=e,{selection:n,doc:r}=t.state,i=null,o=r.textBetween(n.from,n.to);if(t.isActive("link")){let e=t.state.doc.resolve(n.$head.pos),r=e.parent.childAfter(e.parentOffset);if(r.node&&"text"===r.node.type.name){let e=r.node.marks.find(e=>"link"==e.type.name);e&&(i={href:e.attrs.href,text:r.node.textContent})}}let a=t.isActive(H.SparkTypes.Block.Heading),l=a?t.isActive(H.SparkTypes.Block.Heading,{level:1})?1:2:null;f({blockquoteActive:t.isActive(H.SparkTypes.Block.Blockquote),boldActive:t.isActive(H.SparkTypes.Mark.Bold),bulletListActive:t.isActive(H.SparkTypes.Block.BulletList),headingActive:a,headingLevel:l,italicActive:t.isActive(H.SparkTypes.Mark.Italic),linkState:i,orderedListActive:t.isActive(H.SparkTypes.Block.OrderedList),selectionText:o})},[f]),I=(0,S.useMemo)(()=>({transformPastedHTML:e=>{try{let t=(e=>{var t,n,r,i;let o=(e=>{let t=new DOMParser().parseFromString(e,"text/html");for(let e of t.body.childNodes){var n;if(e instanceof HTMLElement&&"B"===e.nodeName&&(null==(n=e.id)?void 0:n.startsWith("docs-internal-")))return{doc:t,node:e}}return null})(e);if(!o)return null;let{doc:a,node:l}=o;for(let e of Array.from(l.childNodes)){if(null==(t=e.textContent)?void 0:t.trim()){if(e instanceof HTMLElement&&"P"===e.nodeName){let t=rj(e);if(t&&t>=20){let r=t>=24?a.createElement("h1"):a.createElement("h2");for(;e.firstChild;)r.appendChild(e.firstChild);null==(n=e.parentNode)||n.replaceChild(r,e)}}continue}if(e instanceof HTMLElement&&"BR"===e.nodeName){e.remove();continue}if(e instanceof HTMLElement&&"P"===e.nodeName){let t=e.getElementsByTagName("img");if(t.length>0){for(let n of t)null==(r=e.parentNode)||r.insertBefore(n,e);e.remove();continue}}if(e instanceof HTMLElement&&"P"===e.nodeName&&""===e.innerText.trim()){e.remove();continue}}for(let e of Array.from(l.getElementsByTagName("a"))){let t=e.getAttribute("href")||"",n=(0,eA.validNormalizedUrl)(t);if(n)t!==n&&e.setAttribute("href",n);else{let t=a.createElement("span");t.innerHTML=e.innerHTML,null==(i=e.parentNode)||i.replaceChild(t,e)}}return l.innerHTML})(e);if(t)return t;let n=(e=>{var t,n,r;let i=(e=>{try{if(!e.includes("<!-- notionvc:"))return null;return new DOMParser().parseFromString(e,"text/html").body}catch(e){return null}})(e);if(!i)return e;for(let e of Array.from(i.childNodes))if((null==(t=e.textContent)||!t.trim())&&e instanceof HTMLElement&&"P"===e.nodeName){let t=e.getElementsByTagName("img");if(t.length>0){for(let r of t)null==(n=e.parentNode)||n.insertBefore(r,e);e.remove();continue}}for(let e of Array.from(i.getElementsByTagName("a"))){let t=e.getAttribute("href")||"",n=(0,eA.validNormalizedUrl)(t);if(n)t!==n&&e.setAttribute("href",n);else{let t=document.createElement("span");t.innerHTML=e.innerHTML,null==(r=e.parentNode)||r.replaceChild(t,e)}}return i.innerHTML})(e);if(n)return n;return e}catch(t){return console.error("Error transforming pasted HTML.",t),e}},handlePaste(e,t){if((e=>{let t,{event:n,onPaste:r}=e;if(!n.clipboardData||!r)return;let i=Array.from(n.clipboardData.types),o=i.join(",")||null,a="";i.includes("text/plain")?a=n.clipboardData.getData("text/plain"):i.length>0&&(a=n.clipboardData.getData(i[0])),i.includes("text/html")&&(t=n.clipboardData.getData("text/html")),a.length>1e3&&(a=a.substring(0,1e3)),t&&t.length>1e3&&(t=t.substring(0,1e3)),r({data_format:o,application_source:(e=>{let{types:t,htmlContent:n}=e;return t.some(e=>e.includes("_notion-"))?"notion":t.some(e=>e.includes("google-docs"))?"google-docs":t.some(e=>e.includes("application/vnd.openxmlformats"))?"microsoft-word":t.includes("public.rtf")||t.includes("text/rtf")?"apple-textedit":t.some(e=>e.includes("slack"))?"slack":t.some(e=>e.includes("linear"))?"linear":t.some(e=>e.includes("vscode")||e.includes("code-oss"))?"vscode":n&&t.includes("text/html")&&n.includes("data-pm-slice")?"spark-editor":t.includes("text/html")&&t.includes("text/plain")?t.length>2?"rich-text-editor":"browser":t.includes("text/html")&&!t.includes("text/plain")?"html-only-source":t.includes("text/plain")&&1===t.length?"plain-text-editor":null})({types:i,htmlContent:t}),pasted_data:a,html_content:t})})({event:t,onPaste:y}),t.clipboardData&&1===t.clipboardData.types.length&&"text/plain"===t.clipboardData.types[0]){let c,u,d,p,f=t.clipboardData.getData("text/plain");if(em(e.state)&&(c=f.replace(/^[\s\u200B-\u200D\uFEFF]+|[\s\u200B-\u200D\uFEFF]+$/g,""),rw.some(e=>e.test(c))||(u=f.replace(/^[\s\u200B-\u200D\uFEFF]+|[\s\u200B-\u200D\uFEFF]+$/g,""),ry.test(u))||(d=f.replace(/^[\s\u200B-\u200D\uFEFF]+|[\s\u200B-\u200D\uFEFF]+$/g,""),rg.test(d))||(p=f.replace(/^[\s\u200B-\u200D\uFEFF]+|[\s\u200B-\u200D\uFEFF]+$/g,""),tM.test(p))))return!1;try{var n,r,i,o,a,l,s;let t=_.SparkMarkdown.parse(f);if(1===t.content.length&&t.content[0].type===H.SparkTypes.Block.Paragraph&&(null==(n=t.content[0].content)?void 0:n.length)===1&&(!(null==(i=t.content[0].content)||null==(r=i[0])?void 0:r.marks)||(null==(a=t.content[0].content)||null==(o=a[0])?void 0:o.marks.length)===1&&(null==(s=t.content[0].content)||null==(l=s[0])?void 0:l.marks[0].type)===H.SparkTypes.Mark.Link))return!1;let c=(0,P.createSliceFromSparkDoc)({schema:e.state.schema,doc:t}),u=e.state.tr.replaceSelection(c);return e.dispatch(u),!0}catch(e){console.error("Error handling markdown paste:",e)}}return!1},scrollMargin:null!=d?d:void 0,scrollThreshold:null!=d?d:void 0}),[d,y]),N=(0,C.useEditor)({extensions:(e=>{let{placeholder:t,toggleMenuOpen:n,userApiId:r,onCmdEnter:i,uploadAttachment:o,uploadImage:a,lookupSlug:l,t:s,...c}=e,u=[tw.configure({placeholder:t}),eJ.default,e0,e1,rl,e2,tx.Paragraph,rd.configure({toggleMenuOpen:n}),ro.Text],d=![rK.EmailSubject,rK.Simple].includes(c.type),p=[rK.Rich,rK.EmailBody].includes(c.type);switch(c.type){case rK.Simple:u.push(eA.Link,e4);break;case rK.EmailSubject:u.push(tc);break;default:u.push(tu,tp.configure({enabled:d}),tA.configure({lookupSlug:l}),eF.configure({uploadImage:a}),tn.configure({enabled:p}),eg.configure({userApiId:r,uploadAttachment:o,t:s}),rb,rk,rT,tb,e7,tk,ts,tf,e8,eA.Link,tg,rs,e4,ta)}return i&&u.push(tv.configure({onCmdEnter:i})),"templateVariableOptions"in c&&u.push(n7.configure(c.templateVariableOptions)),u})({onCmdEnter:a,placeholder:l,toggleMenuOpen:()=>j(e=>!e),userApiId:(null==v?void 0:v.api_id)||null,uploadAttachment:m,uploadImage:g,lookupSlug:b,t:x,...k}),editorProps:I,immediatelyRender:!1,content:r||H.SparkTypes.EMPTY_DOCUMENT,onTransaction:M,onSelectionUpdate:M,onUpdate:e=>{i(e.editor.getJSON()),M(e)}}),F=null!=N;(0,S.useEffect)(()=>{c&&N&&setTimeout(()=>{N.commands.focus()},300)},[F]),(0,S.useImperativeHandle)(t,()=>({editor:N,focus:()=>null==N?void 0:N.commands.focus(),focusOnBeginning:()=>null==N?void 0:N.chain().focus().setTextSelection(0).run(),toggleBold:()=>null==N?void 0:N.commands.toggleBold(),toggleItalic:()=>null==N?void 0:N.commands.toggleItalic(),toggleHeading:()=>null==N?void 0:N.commands.toggleHeading(),toggleBlockquote:()=>null==N?void 0:N.commands.toggleBlockquote(),toggleOrderedList:()=>null==N?void 0:N.commands.toggleOrderedList(),insertBase64Image:e=>null==N?void 0:N.commands.insertBase64Image(e),toggleBulletList:()=>null==N?void 0:N.commands.toggleBulletList(),setHeading:e=>null==N?void 0:N.commands.setHeading(e),insertLink:e=>null==N?void 0:N.commands.insertLink(e),indent:()=>null==N?void 0:N.commands.indent(),dedent:()=>null==N?void 0:N.commands.dedent()}));let z=!["email-subject"].includes(k.type),V=!["email-subject","simple"].includes(k.type);return(0,T.jsx)(L.ErrorBoundary,{fallback:(0,T.jsx)(D.T,{tagName:"div",defaultMessage:"We encountered an issue with the editor. Please <link>contact support</link>.",id:"CDfNeX",description:"Error message shown when the editor fails to load.",values:{link:e=>(0,T.jsx)("a",{href:"mailto:support@luma.com?".concat(B.default.stringify({subject:"Editor Error"})),children:e})}}),children:(0,T.jsxs)(O.TintWrapper,{tintColor:null!=h?h:null,mode:"brand-color-only",children:[(0,T.jsx)("div",{className:A.default.dynamic([["76ad8037dcffdaf5",[s||0,s||0]]])+" "+((0,E.default)("editable-container",u,{disabled:o,"email-subject":"email-subject"===k.type,"add-block-menu-open":w})||""),children:(0,T.jsx)("div",{className:A.default.dynamic([["76ad8037dcffdaf5",[s||0,s||0]]])+" editable spark-content notranslate",children:(0,T.jsxs)("div",{className:A.default.dynamic([["76ad8037dcffdaf5",[s||0,s||0]]]),children:[N&&z&&!p&&(0,T.jsx)(r$,{editor:N}),N&&V&&!p&&(0,T.jsx)(eX,{editor:N,open:w,setOpen:j,uploadAttachment:m,uploadImage:g,userApiId:null!=(n=null==v?void 0:v.api_id)?n:null}),(0,T.jsx)(C.EditorContent,{editor:N})]})})}),(0,T.jsx)(A.default,{id:"76ad8037dcffdaf5",dynamic:[s||0,s||0],children:".editable-container.__jsx-style-dynamic-selector{line-height:var(--default-line-height);width:100%;font-weight:var(--font-weight-regular);border-radius:var(--border-radius);height:auto;min-height:".concat(s||0,";background-clip:padding-box;padding:0;display:block;overflow:visible}.editable-container.email-subject.__jsx-style-dynamic-selector .editable.__jsx-style-dynamic-selector{padding:.5rem var(--input-horizontal-padding)}.editable-container.disabled.__jsx-style-dynamic-selector{opacity:1;pointer-events:none;overflow:hidden}.editable-container.disabled.__jsx-style-dynamic-selector .editable{color:var(--input-color);background-color:var(--disabled-background-color);box-shadow:none}.editable-container.__jsx-style-dynamic-selector .ProseMirror{min-height:").concat(s||0,";outline:none}.editable-container.__jsx-style-dynamic-selector:not(.borderless):not(:disabled):focus-within{border:1px solid var(--input-focus-border-color);box-shadow:var(--input-focus-box-shadow)}.editable-container.__jsx-style-dynamic-selector .editable.__jsx-style-dynamic-selector{padding:var(--input-padding);-webkit-overflow-scrolling:touch}.editable-container.__jsx-style-dynamic-selector .editable.__jsx-style-dynamic-selector ::selection{background-color:var(--brand-pale-bg-color)}.editable-container.borderless.__jsx-style-dynamic-selector .editable.__jsx-style-dynamic-selector{padding:0}.editable-container.__jsx-style-dynamic-selector .toolbar-container.__jsx-style-dynamic-selector{border-bottom:1px solid var(--input-border-color);overflow-x:auto}.editable-container.__jsx-style-dynamic-selector .ProseMirror p.is-editor-empty:before{content:attr(data-placeholder);float:left;color:var(--placeholder-color);pointer-events:none;height:0}")})]})})});var rZ=e.i(829900),rG=e.i(378393),rX=e.i(348688),rJ=e.i(465028);let rQ=H.SparkTypes.EMPTY_DOCUMENT,r0=(0,S.forwardRef)((e,t)=>{let{user:n}=(0,rZ.useUserContext)(),{metadata:r,...i}=e;return(0,T.jsx)(rY,{ref:t,...i,user:n,uploadAttachment:r1,uploadImage:r2,lookupSlug:r3,onPaste:e=>{rG.Analytics.track({name:"spark-pasted",properties:{...e,event_api_id:null==r?void 0:r.event_api_id}})}})}),r1=async e=>{let{file:t,t:n}=e,{data:r}=await (0,j.callWithToast)((0,M.uploadFileToS3)({file:t,type:"file",destination:{bucket:"images.lumacdn.com",folder:"editor-attachments"},createPresignedUrl:rJ.createPresignedUrl}),{loading:n({defaultMessage:"Uploading attachment",id:"0lo1iJ",description:"Loading message for uploading an attachment."}),success:n({defaultMessage:"Attachment uploaded successfully!",id:"JhfkN4",description:"Success message for uploading an attachment."}),error:n({defaultMessage:"There was an error uploading the attachment.",id:"w7NLSR",description:"Error message shown when an attachment fails to upload"})});return(null==r?void 0:r.file_url)||null},r2=async e=>await (0,M.uploadFileToS3)({file:e,destination:{bucket:"images.lumacdn.com",folder:"editor-images"},createPresignedUrl:rJ.createPresignedUrl}),r3=async e=>await rX.APIClient.get("/url",{url:e,proxy_key:null,invite_secret_key:null});e.s(["BLANK_MIRROR_DOC",0,rQ,"SparkEditor",0,r0,"SparkEmailBodyEditor",0,e=>{let{templateVariableOptions:t,...n}=e;return(0,T.jsx)(r0,{type:rK.EmailBody,templateVariableOptions:t,...n})},"SparkEmailSubjectEditor",0,e=>{let{templateVariableOptions:t,...n}=e;return(0,T.jsx)(r0,{...n,type:rK.EmailSubject,templateVariableOptions:t})}],657584)}]);

//# debugId=27f4d59d-c143-3622-86f1-fc3829870a7d
//# sourceMappingURL=d3a13ce71b66c721.js.map